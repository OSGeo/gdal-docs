

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>RFC 64: Triangle, Polyhedral surface and TIN &mdash; GDAL  documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://gdal.orgdevelopment/rfc/rfc64_triangle_polyhedralsurface_tin.html"/>
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/gdal.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="RFC 65: RFC 7946 GeoJSON" href="rfc65_rfc7946_geojson.html" />
    <link rel="prev" title="RFC 63 : Sparse datasets improvements" href="rfc63_sparse_datasets_improvements.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/gdalicon.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programs/index.html">Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers/raster/index.html">Raster drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../drivers/vector/index.html">Vector drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Development</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">RFC list</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="rfc1_pmc.html">RFC 1: Project Management Committee Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc2_svn.html">RFC 2: Migration to OSGeo Subversion Repository</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc3_commiters.html">RFC 3: GDAL Committer Guildlines</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc4_geolocate.html">RFC 4: Geolocation Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc5_unicode.html">RFC 5: Unicode support in GDAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc6_sqlgeom.html">RFC 6: Geometry and Feature Style as OGR Special Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc7_vsilapi.html">RFC 7: Use VSILFILE for VSI*L Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc8_devguide.html">RFC 8: Developer Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc9_maintainer.html">RFC 9: GDAL Paid Maintainer Guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc10_ogropen.html">RFC 10: OGR Open Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc11_fastidentify.html">RFC 11: Fast Format Identification</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc12_filemanagement.html">RFC 12: Improved File Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc13_createfeatures.html">RFC 13: Improved Feature Insertion/Update/Delete Performance in Batch Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc14_imagestructure.html">RFC 14: Image Structure Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc15_nodatabitmask.html">RFC 15: Band Masks</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc16_ogr_reentrancy.html">RFC 16: OGR Thread Safety</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc17_python_namespaces.html">RFC 17: Python Namespaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc18_ogr_styles_c_api.html">RFC 18: OGR Style Support in C API</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc19_safememalloc.html">RFC 19: Safer memory allocation in GDAL</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc20_srs_axes.html">RFC 20: OGRSpatialReference Axis Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc21_ogrsqlcast.html">RFC 21: OGR SQL type cast and field name alias</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc22_rpc.html">RFC 22: RPC Georeferencing</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc23_ogr_unicode.html">RFC 23.1: Unicode support in OGR</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc24_progressive_data_support.html">RFC 24: GDAL Progressive Data Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc25_fast_open.html">RFC 25: Fast Open</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc26_blockcache.html">RFC 26: GDAL Block Cache Improvements</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc27_supportdata.html">RFC 27: Improved Supporting Data File Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc28_sqlfunc.html">RFC 28: OGR SQL Generalized Expressions</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc29_desired_fields.html">RFC 29: OGR Set Ignored Fields</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc30_utf8_filenames.html">RFC 30: Unicode Filenames</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc31_ogr_64.html">RFC 31: OGR 64bit Integer Fields and FIDs</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc32_gdallocationinfo.html">RFC 32: gdallocationinfo utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc33_gtiff_pixelispoint.html">RFC 33: GTiff - Fixing PixelIsPoint Interpretation</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc34_license_policy.html">RFC 34: License Policy Enforcement</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc35_deletereorderalterfielddefn.html">RFC 35: Delete, reorder and alter field definitions of OGR layers</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc36_open_by_drivername.html">RFC 36: Allow specification of intended driver on GDALOpen</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc37_cplerror_userdata.html">RFC 37: User data callbacks in CPLError</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc38_ogr_faster_open.html">RFC 38: OGR Faster Open</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc39_ogr_layer_algebra.html">RFC 39: OGR Layer Algebra</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc40_enhanced_rat_support.html">RFC 40: Improving performance of Raster Attribute Table implementation for large tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc41_multiple_geometry_fields.html">RFC 41 : Support for multiple geometry fields in OGR</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc42_find_laundered_fields.html">RFC 42: OGR Layer laundered field lookup</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc43_getmetadatadomainlist.html">RFC 43: GDALMajorObject::GetMetadataDomainList</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc44_gdalinfoxml.html">RFC 44: Add Parseable Output Formats for ogrinfo and gdalinfo</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc45_virtualmem.html">RFC 45: GDAL datasets and raster bands as virtual memory mappings</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc46_gdal_ogr_unification.html">RFC 46: GDAL/OGR unification</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc47_dataset_caching.html">RFC 47: Per Dataset Caching and GDALRasterBand Multithreading</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc48_geographical_networks_support.html">RFC 48: Geographical networks support</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc49_curve_geometries.html">RFC 49: Curve geometries</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc50_ogr_field_subtype.html">RFC 50: OGR field subtypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc51_rasterio_resampling_progress.html">RFC 51: RasterIO() improvements : resampling and progress callback</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc52_strict_sql_quoting.html">RFC 52: Strict OGR SQL quoting</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc53_ogr_notnull_default.html">RFC 53: OGR not-null constraints and default values</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc54_dataset_transactions.html">RFC 54: Dataset transactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc55_refined_setfeature_deletefeature_semantics.html">RFC 55: Refined SetFeature() and DeleteFeature() semantics</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc56_millisecond_precision.html">RFC 56: OFTTime/OFTDateTime millisecond accuracy</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc57_histogram_64bit_count.html">RFC 57: 64-bit bucket counts for histograms</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc58_removing_dataset_nodata_value.html">RFC 58: Removing Dataset Nodata Value</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc59.1_utilities_as_a_library.html">RFC 59.1 : GDAL/OGR utilities as a library</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc59_utilities_as_a_library.html">RFC 59 : GDAL/OGR utilities as a library</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc60_improved_roundtripping_in_ogr.html">RFC 60 : Improved round-tripping in OGR</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc61_support_for_measured_geometries.html">RFC 61 : Support for measured geometries</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc62_raster_algebra.html">RFC 62 : Raster algebra</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc63_sparse_datasets_improvements.html">RFC 63 : Sparse datasets improvements</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">RFC 64: Triangle, Polyhedral surface and TIN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#summary">Summary</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reference-documents">Reference documents</a></li>
<li class="toctree-l4"><a class="reference internal" href="#core-changes">Core changes</a></li>
<li class="toctree-l4"><a class="reference internal" href="#geometry-types">Geometry types</a></li>
<li class="toctree-l4"><a class="reference internal" href="#geometry-conversions">Geometry conversions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#changes-in-drivers">Changes in drivers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compatibility">Compatibility</a></li>
<li class="toctree-l4"><a class="reference internal" href="#testing">Testing</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementation">Implementation</a></li>
<li class="toctree-l4"><a class="reference internal" href="#voting-history">Voting history</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rfc65_rfc7946_geojson.html">RFC 65: RFC 7946 GeoJSON</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc66_randomlayerreadwrite.html">RFC 66 : OGR random layer read/write capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc67_nullfieldvalues.html">RFC 67 : Null values in OGR</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc68_cplusplus11.html">RFC 68: C++11 Compilation Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc69_cplusplus_formatting.html">RFC 69: C/C++ Code Formatting</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc70_output_format_guess.html">RFC 70: Guessing output format from output file name extension for utilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc71_github_migration.html">RFC 71: Migration to GitHub</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc72_pytest.html">RFC 72: Update autotest suite to use pytest</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc73_proj6_wkt2_srsbarn.html">RFC 73: Integration of PROJ6 for WKT2, late binding capabilities, time-support and unified CRS database</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc74_sphinx.html">RFC 74: Migrate gdal.org to RTD-style Sphinx infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc75_multidimensional_arrays.html">RFC 75: Multidimensional arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="rfc76_ogrpythondrivers.html">RFC 76: OGR Python drivers</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">How to contribute?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GDAL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html"> GDAL  documentation </a> &raquo;</li>
      
          <li><a href="../index.html">Development</a> &raquo;</li>
      
          <li><a href="index.html">RFC list</a> &raquo;</li>
      
      <li>RFC 64: Triangle, Polyhedral surface and TIN</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit//master/gdal/doc/source/development/rfc/rfc64_triangle_polyhedralsurface_tin.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="rfc65_rfc7946_geojson.html" class="btn btn-neutral float-right" title="RFC 65: RFC 7946 GeoJSON" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rfc63_sparse_datasets_improvements.html" class="btn btn-neutral float-left" title="RFC 63 : Sparse datasets improvements" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rfc-64-triangle-polyhedral-surface-and-tin">
<span id="rfc-64"></span><h1>RFC 64: Triangle, Polyhedral surface and TIN<a class="headerlink" href="#rfc-64-triangle-polyhedral-surface-and-tin" title="Permalink to this headline">¶</a></h1>
<p>Authors: Avyav Kumar Singh, Even Rouault</p>
<p>Contact: avyavkumar at gmail dot com, even.rouault at spatialys.com</p>
<p>Status: Adopted, implemented</p>
<p>Implementation version: GDAL 2.2</p>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>As of now, the <a class="reference internal" href="../../api/ogrgeometry_cpp.html#_CPPv411OGRGeometry" title="OGRGeometry"><code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">OGRGeometry</span></code></a> class (the base class from which
all the subtypes are derived) is limited to OGRCompoundCurve,
OGRCircularString, OGRLinearRing, OGRMultiLineString, OGRMultiPoint,
OGRMultiPolygon, OGRMultiCurve, OGRSimpleCurve, OGRCurvePolygon and
OGRPolygon.</p>
<p>This RFC addresses the addition of the following new geometries in
OGRGeometry:</p>
<ul class="simple">
<li><p>Triangle - A subset of polygons, the fundamental difference is that
it is made of 3 nodes only (actually 4, with the last one being the
repetition of the first one) and ONLY ONE exterior boundary and NO
interior polygons.</p></li>
<li><p>PolyhedralSurface - A 3D figure made exclusively of Polygons.</p></li>
<li><p>TriangulatedSurface - A subset of PolyhedralSurface; a 3D figure
which consists exclusively of Triangles.</p></li>
</ul>
</div>
<div class="section" id="reference-documents">
<h2>Reference documents<a class="headerlink" href="#reference-documents" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://portal.opengeospatial.org/files/?artifact_id=25355">OpenGIS Simple Feature Access Part 1 : Common Architecture,v
1.2.1</a>,
a.k.a. SFA 1.2.1</p></li>
<li><p><a class="reference external" href="https://github.com/postgis/postgis/blob/svn-trunk/doc/bnf-wkt.txt">BNF of WKT
encoding</a>:
extracted from SQL/MM Part 3</p></li>
<li><p><a class="reference external" href="https://github.com/postgis/postgis/blob/svn-trunk/doc/bnf-wkb.txt">BNF of WKB
encoding</a>:
extracted from SQL/MM Part 3</p></li>
</ul>
</div>
<div class="section" id="core-changes">
<h2>Core changes<a class="headerlink" href="#core-changes" title="Permalink to this headline">¶</a></h2>
<p>The new class hierarchy is the following and is mostly consistent with
SQL/MM Part 3</p>
<img alt="../../_images/classOGRGeometry_RFC64.png" src="../../_images/classOGRGeometry_RFC64.png" />
<p>Some prelimenary work had already been done prior to this proposal, such
as including the necessary WKB codes in &lt;ogr_core.h&gt;.</p>
<p>Additionally, the <a class="reference external" href="http://www.sfcgal.org/">SFCGAL</a> library is a new
optional dependency of GDAL (build support only done for Unix for now).
The minimum version tested to build is 1.2.2 (as found in Ubuntu 16.04).
As mentioned in its home page, “SFCGAL is a C++ wrapper library around
CGAL with the aim of supporting ISO 19107:2013 and OGC Simple Features
Access 1.2 for 3D operations.” It is mostly used as a potential geometry
backend by PostGIS. It has a C API, that is the one we use.</p>
<p>SFCGAL functions may be used by methods of OGRGeometry (currently
IsValid(), Distance(), ConvexHull(), Intersection(), Union(),
Difference(), SymDifference(), Crosses()), as soon as one of the
geometry operands is a Triangle, PolyhedralSurface or TIN.</p>
<p>Two new OGRGeometry methods are used to convert SFCGAL geometries &lt;-&gt;
OGR geometries.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">static</span> <span class="n">sfcgal_geometry_t</span><span class="o">*</span> <span class="n">OGRexportToSFCGAL</span><span class="p">(</span><span class="n">OGRGeometry</span> <span class="o">*</span><span class="n">poGeom</span><span class="p">);</span>
<span class="n">static</span> <span class="n">OGRGeometry</span><span class="o">*</span> <span class="n">SFCGALexportToOGR</span><span class="p">(</span><span class="n">sfcgal_geometry_t</span><span class="o">*</span> <span class="n">_geometry</span><span class="p">);</span>
</pre></div>
</div>
<p>Besides SFCGAL, GEOS methods are still used in some cases, but with the
following limitations - a Triangle is converted to a Polygon with one
exterior ring; Polyhedral Surfaces and Triangulated Surfaces are
converted to geometry collection of polygons. (each Triangle in a
Triangulated Surface is converted to a Polygon as described previously)</p>
<p>The API for the new geometries introduced includes -</p>
<ul class="simple">
<li><p>Overwriting existing methods for Polygon in the case of Triangle API.
A complete API is provided below -</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>class CPL_DLL OGRTriangle : public OGRPolygon
{
  private:
    bool quickValidityCheck() const;

  protected:
//! @cond Doxygen_Suppress
    virtual OGRSurfaceCasterToPolygon   GetCasterToPolygon() const CPL_OVERRIDE;
    virtual OGRErr importFromWKTListOnly( char ** ppszInput, int bHasZ, int bHasM,
                                       OGRRawPoint*&amp; paoPoints, int&amp; nMaxPoints,
                                       double*&amp; padfZ ) CPL_OVERRIDE;
//! @endcond

  public:
    OGRTriangle();
    OGRTriangle(const OGRPoint &amp;p, const OGRPoint &amp;q, const OGRPoint &amp;r);
    OGRTriangle(const OGRTriangle &amp;other);
    OGRTriangle(const OGRPolygon &amp;other, OGRErr &amp;eErr);
    OGRTriangle&amp; operator=(const OGRTriangle&amp; other);
    virtual ~OGRTriangle();
    virtual const char *getGeometryName() const CPL_OVERRIDE;
    virtual OGRwkbGeometryType getGeometryType() const CPL_OVERRIDE;

    // IWks Interface
    virtual OGRErr importFromWkb( unsigned char *, int = -1,
                                  OGRwkbVariant=wkbVariantOldOgc ) CPL_OVERRIDE;
    virtual OGRErr importFromWkt( char ** ) CPL_OVERRIDE;

    // New methods rewritten from OGRPolygon/OGRCurvePolygon/OGRGeometry
    virtual OGRErr addRingDirectly( OGRCurve * poNewRing ) CPL_OVERRIDE;

//! @cond Doxygen_Suppress
    static OGRGeometry* CastToPolygon(OGRGeometry* poGeom);
//! @endcond
};
</pre></div>
</div>
<ul class="simple">
<li><p>The PolyhedralSurface API is derived from OGRSurface. Internally, it
uses an OGRMultiPolygon to store all the Polygons comprising the
Polyhedral Surface. Most of the implementations of the methods just
reference corresponding OGRMultiPolygon methods with checks to ensure
that conditions are maintained.</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>class CPL_DLL OGRPolyhedralSurface : public OGRSurface
{
  protected:
//! @cond Doxygen_Suppress
    friend class OGRTriangulatedSurface;
    OGRMultiPolygon oMP;
    virtual OGRSurfaceCasterToPolygon      GetCasterToPolygon() const CPL_OVERRIDE;
    virtual OGRSurfaceCasterToCurvePolygon GetCasterToCurvePolygon() const CPL_OVERRIDE;
    virtual OGRBoolean         isCompatibleSubType( OGRwkbGeometryType ) const;
    virtual const char*        getSubGeometryName() const;
    virtual OGRwkbGeometryType getSubGeometryType() const;
    OGRErr exportToWktInternal (char ** ppszDstText, OGRwkbVariant eWkbVariant, const char* pszSkipPrefix ) const;

    virtual OGRPolyhedralSurfaceCastToMultiPolygon GetCasterToMultiPolygon() const;
    static OGRMultiPolygon* CastToMultiPolygonImpl(OGRPolyhedralSurface* poPS);
//! @endcond

  public:
    OGRPolyhedralSurface();
    OGRPolyhedralSurface(const OGRPolyhedralSurface &amp;poGeom);
    virtual ~OGRPolyhedralSurface();
    OGRPolyhedralSurface&amp; operator=(const OGRPolyhedralSurface&amp; other);

    // IWks Interface
    virtual int WkbSize() const CPL_OVERRIDE;
    virtual const char *getGeometryName() const CPL_OVERRIDE;
    virtual OGRwkbGeometryType getGeometryType() const  CPL_OVERRIDE;
    virtual OGRErr importFromWkb( unsigned char *, int=-1, OGRwkbVariant=wkbVariantOldOgc ) CPL_OVERRIDE;
    virtual OGRErr exportToWkb( OGRwkbByteOrder, unsigned char *, OGRwkbVariant=wkbVariantOldOgc ) const CPL_OVERRIDE;
    virtual OGRErr importFromWkt( char ** )  CPL_OVERRIDE;
    virtual OGRErr exportToWkt( char ** ppszDstText, OGRwkbVariant=wkbVariantOldOgc ) const  CPL_OVERRIDE;

    // IGeometry methods
    virtual int getDimension() const  CPL_OVERRIDE;

    virtual void empty()  CPL_OVERRIDE;

    virtual OGRGeometry *clone() const  CPL_OVERRIDE;
    virtual void getEnvelope(OGREnvelope * psEnvelope) const  CPL_OVERRIDE;
    virtual void getEnvelope(OGREnvelope3D * psEnvelope) const  CPL_OVERRIDE;

    virtual void flattenTo2D() CPL_OVERRIDE;
    virtual OGRErr transform(OGRCoordinateTransformation*) CPL_OVERRIDE;
    virtual OGRBoolean Equals(OGRGeometry*) const CPL_OVERRIDE;
    virtual double get_Area() const CPL_OVERRIDE;
    virtual OGRErr PointOnSurface(OGRPoint*) const CPL_OVERRIDE;

    static OGRMultiPolygon* CastToMultiPolygon(OGRPolyhedralSurface* poPS);
    virtual OGRBoolean hasCurveGeometry(int bLookForNonLinear = FALSE) const CPL_OVERRIDE;
    virtual OGRErr addGeometry( const OGRGeometry * );
    OGRErr addGeometryDirectly(OGRGeometry *poNewGeom);
    int getNumGeometries() const;
    OGRGeometry* getGeometryRef(int i);
    const OGRGeometry* getGeometryRef(int i) const;

    virtual OGRBoolean  IsEmpty() const CPL_OVERRIDE;
    virtual void setCoordinateDimension( int nDimension ) CPL_OVERRIDE;
    virtual void set3D( OGRBoolean bIs3D ) CPL_OVERRIDE;
    virtual void setMeasured( OGRBoolean bIsMeasured ) CPL_OVERRIDE;
    virtual void swapXY() CPL_OVERRIDE;
    OGRErr removeGeometry( int iIndex, int bDelete = TRUE );
};
</pre></div>
</div>
<ul class="simple">
<li><p>The Triangulated Surface API is similar to Polyhedral Surface, and
the MultiPolygon class was tweaked slightly to include methods to run
which consisted of subgeometries of the form Triangle. (A
MultiPolygon is strictly a collection of Polygons). These methods are
internal to OGRMultiPolygon and cannot be accessed by a public user.
For instance, the <code class="docutils literal notranslate"><span class="pre">OGRMultiPolygon::addGeometryDirectly</span></code> method has
a check that the subgeometry added to it should be of the type
POLYGON. Rather than mess around with the existing function, a new
function has been written which does not implement this check -</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/************************************************************************/
/*                         _addGeometryDirectly()                       */
/*      Only to be used in conjunction with OGRTriangulatedSurface.     */
/*                        DO NOT USE IT ELSEWHERE.                      */
/************************************************************************/

OGRErr OGRMultiPolygon::_addGeometryDirectly( OGRGeometry * poNewGeom )
{
    if ( wkbFlatten(poNewGeom-&gt;getGeometryType()) != wkbTriangle)
        return OGRERR_UNSUPPORTED_GEOMETRY_TYPE;

    if( poNewGeom-&gt;Is3D() &amp;&amp; !Is3D() )
        set3D(TRUE);

    if( poNewGeom-&gt;IsMeasured() &amp;&amp; !IsMeasured() )
        setMeasured(TRUE);

    if( !poNewGeom-&gt;Is3D() &amp;&amp; Is3D() )
        poNewGeom-&gt;set3D(TRUE);

    if( !poNewGeom-&gt;IsMeasured() &amp;&amp; IsMeasured() )
        poNewGeom-&gt;setMeasured(TRUE);

    OGRGeometry** papoNewGeoms = (OGRGeometry **) VSI_REALLOC_VERBOSE( papoGeoms,
                                             sizeof(void*) * (nGeomCount+1) );
    if( papoNewGeoms == NULL )
        return OGRERR_FAILURE;

    papoGeoms = papoNewGeoms;
    papoGeoms[nGeomCount] = poNewGeom;
    nGeomCount++;

    return OGRERR_NONE;
}
</pre></div>
</div>
<ul class="simple">
<li><p>The Triangulated Surface API is as follows -</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>class CPL_DLL OGRTriangulatedSurface : public OGRPolyhedralSurface
{
  protected:
//! @cond Doxygen_Suppress
    virtual OGRBoolean         isCompatibleSubType( OGRwkbGeometryType ) const CPL_OVERRIDE;
    virtual const char*        getSubGeometryName() const CPL_OVERRIDE;
    virtual OGRwkbGeometryType getSubGeometryType() const CPL_OVERRIDE;

    virtual OGRPolyhedralSurfaceCastToMultiPolygon GetCasterToMultiPolygon() const CPL_OVERRIDE;
    static OGRMultiPolygon* CastToMultiPolygonImpl(OGRPolyhedralSurface* poPS);
//! @endcond

  public:
    OGRTriangulatedSurface();
    OGRTriangulatedSurface(const OGRTriangulatedSurface &amp;other);
    ~OGRTriangulatedSurface();

    OGRTriangulatedSurface&amp; operator=(const OGRTriangulatedSurface&amp; other);
    virtual const char *getGeometryName() const CPL_OVERRIDE;
    virtual OGRwkbGeometryType getGeometryType() const CPL_OVERRIDE;

    // IWks Interface
    virtual OGRErr addGeometry( const OGRGeometry * ) CPL_OVERRIDE;

    static OGRPolyhedralSurface* CastToPolyhedralSurface(OGRTriangulatedSurface* poTS);
};
</pre></div>
</div>
</div>
<div class="section" id="geometry-types">
<h2>Geometry types<a class="headerlink" href="#geometry-types" title="Permalink to this headline">¶</a></h2>
<p>The new geometry WKB values can be seen as below -</p>
<table class="docutils align-center">
<colgroup>
<col style="width: 52%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Geometry Type</p></th>
<th class="head"><p>2D</p></th>
<th class="head"><p>Z</p></th>
<th class="head"><p>M</p></th>
<th class="head"><p>ZM</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PolyhedralSurface</p></td>
<td><p>0015</p></td>
<td><p>1015</p></td>
<td><p>2015</p></td>
<td><p>3015</p></td>
</tr>
<tr class="row-odd"><td><p>TIN</p></td>
<td><p>0016</p></td>
<td><p>1016</p></td>
<td><p>2016</p></td>
<td><p>3016</p></td>
</tr>
<tr class="row-even"><td><p>Triangle</p></td>
<td><p>0017</p></td>
<td><p>1017</p></td>
<td><p>2017</p></td>
<td><p>3017</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="geometry-conversions">
<h2>Geometry conversions<a class="headerlink" href="#geometry-conversions" title="Permalink to this headline">¶</a></h2>
<p>The OGRGeometryFactory::forceTo() and forceToMultiPolygon() methods have
been enhanced to support conversions between the new geometry types, and
towards multipolygon. Note that converting a TIN or a PolyhedralSurface
into a MultiPolygon is semantically incorrect since a MultiPolygon is
suppose to contain geometries in the same plane, but it might help when
converting those new geometry types into a format that doesn’t support
them (and such conversion was for example implicitly done in the reading
side of the shapefile driver previously)</p>
</div>
<div class="section" id="changes-in-drivers">
<h2>Changes in drivers<a class="headerlink" href="#changes-in-drivers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="postgis">
<h3>PostGIS<a class="headerlink" href="#postgis" title="Permalink to this headline">¶</a></h3>
<p>No changes done to the driver explicitly, but it has been ensured that
PG &lt;-&gt; OGR compatibility has been maintained. PostGIS 3D functions work
on OGR, simple scripts work, for example from
<code class="docutils literal notranslate"><span class="pre">autotest/ogr/ogr_pg.py</span></code>, we have -</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">wkt_list</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;POLYHEDRALSURFACE (((0 0 0,0 0 1,0 1 1,0 1 0,0 0 0)),((0 0 0,0 1 0,1 1 0,1 0 0,0 0 0)),((0 0 0,1 0 0,1 0 1,0 0 1,0 0 0)),((1 1 0,1 1 1,1 0 1,1 0 0,1 1 0)),((0 1 0,0 1 1,1 1 1,1 1 0,0 1 0)),((0 0 1,1 0 1,1 1 1,0 1 1,0 0 1)))&#39;</span><span class="p">,</span>
                <span class="s1">&#39;TIN (((0 0 0,0 0 1,0 1 0,0 0 0)),((0 0 0,0 1 0,1 1 0,0 0 0)))&#39;</span><span class="p">,</span>
                <span class="s1">&#39;TRIANGLE ((48 36 84,32 54 64,86 11 54,48 36 84))&#39;</span> <span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">):</span>
        <span class="n">gdaltest</span><span class="o">.</span><span class="n">pg_ds</span><span class="o">.</span><span class="n">ExecuteSQL</span><span class="p">(</span> <span class="s2">&quot;INSERT INTO zgeoms (field_no, wkb_geometry) VALUES (</span><span class="si">%d</span><span class="s2">,GeomFromEWKT(&#39;</span><span class="si">%s</span><span class="s2">&#39;))&quot;</span> <span class="o">%</span> <span class="p">(</span> <span class="n">i</span><span class="p">,</span> <span class="n">wkt_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="shapefile">
<h3>ShapeFile<a class="headerlink" href="#shapefile" title="Permalink to this headline">¶</a></h3>
<p>Shapefiles have the concept of a “MultiPatch” object. The MultiPatch can
be made of several parts, which are</p>
<ul class="simple">
<li><p>A TriangleStrip is a linked strip of triangles, where every vertex
(after the first two) completes a new triangle. A new triangle is
always formed by connecting the new vertex with its two immediate
predecessors.</p></li>
<li><p>A TriangleFan is a linked fan of triangles, where every vertex (after
the first two) completes a new triangle. A new triangle is always
formed by connecting the new vertex with its immediate predecessor
and the first vertex of the part.</p></li>
<li><p>Rings (outer ring, inner ring, first ring, “non-typed” ring) Up to
now multipatch were read as MultiPolygon. Now, in general, a
GeometryCollection will be returned, with zero or several TIN
corresponding to the TriangleStrip/TriangleFan and zero or one
MultiPolygon with all the rings. If there’s only one TIN or one
MultiPolygon, it will be returned as a top-level geometry. The layer
type will be Unknown On writing, the SHPT layer creation option is
extended to recognize the MULTIPATCH value, and the current logic to
guess the shape type from the layer geometry type or the geometry
type of the first feature is extended to support MULTIPATCH. On a
MULTIPATCH layer, geometries of type TIN, POLYHEDRALSURFACE,
MULTIPOLYGON or GEOMETRYCOLLECTION (whose subgeometries are on of the
3 previous types) are accepted and converted to a MultiPatch object,
trying to use TriangleStrip and TriangleFan if the triangles are in
the expected order.</p></li>
</ul>
</div>
<div class="section" id="filegdb-openfilegdb">
<h3>FileGDB, OpenFileGDB<a class="headerlink" href="#filegdb-openfilegdb" title="Permalink to this headline">¶</a></h3>
<p>The FileGDB format support the MultiPatch object as well, with one
extension. There is a new type of part, which is made of several
triangles whose organization is not TriangleStrip or TriangleFan. Both
drivers have been upgraded to work like the ShapeFile driver on the
reading side. On the writing side, the FileGDB driver will automatically
write a MultiPatch if the layer geometry type is TIN or
PolyhedralSurface. The layer option that existed before
CREATE_MULTIPATCH=YES can still be used to force writing as MultiPatch</p>
</div>
<div class="section" id="gml">
<h3>GML<a class="headerlink" href="#gml" title="Permalink to this headline">¶</a></h3>
<p>The GML driver has been modified for both input and output -&gt; Triangle,
PolyhedralSurface and TriangulatedSurface are capable of being
read/written from/to a GML document. Sample examples include -</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;TRIANGLE ((0 0,0 1,0 1,0 0))&#39;</span> <span class="ow">is</span> <span class="n">parsed</span> <span class="n">to</span> <span class="o">-</span>
<span class="s1">&#39;&lt;gml:Triangle&gt;</span>
    <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">exterior</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">LinearRing</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">posList</span><span class="o">&gt;</span><span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">1</span> <span class="mi">0</span> <span class="mi">0</span><span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">posList</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">LinearRing</span><span class="o">&gt;</span>
    <span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">exterior</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">Triangle</span><span class="o">&gt;</span><span class="s1">&#39;</span>

<span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">PolyhedralSurface</span><span class="o">&gt;</span>
   <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">polygonPatches</span><span class="o">&gt;</span>
       <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">PolygonPatch</span><span class="o">&gt;</span>
           <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">exterior</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">LinearRing</span><span class="o">&gt;</span>
                   <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">posList</span> <span class="n">srsDimension</span><span class="o">=</span><span class="s2">&quot;3&quot;</span><span class="o">&gt;</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span> <span class="mi">7</span> <span class="mi">8</span> <span class="mi">9</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">posList</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">LinearRing</span><span class="o">&gt;</span>
           <span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">exterior</span><span class="o">&gt;</span>
       <span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">PolygonPatch</span><span class="o">&gt;</span>
       <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">PolygonPatch</span><span class="o">&gt;</span>
           <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">exterior</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">LinearRing</span><span class="o">&gt;</span>
                   <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">posList</span> <span class="n">srsDimension</span><span class="o">=</span><span class="s2">&quot;3&quot;</span><span class="o">&gt;</span><span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span> <span class="mi">13</span> <span class="mi">14</span> <span class="mi">15</span> <span class="mi">16</span> <span class="mi">17</span> <span class="mi">18</span> <span class="mi">10</span> <span class="mi">11</span> <span class="mi">12</span><span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">posList</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">LinearRing</span><span class="o">&gt;</span>
           <span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">exterior</span><span class="o">&gt;</span>
           <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">interior</span><span class="o">&gt;</span>
               <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">LinearRing</span><span class="o">&gt;</span>
                   <span class="o">&lt;</span><span class="n">gml</span><span class="p">:</span><span class="n">posList</span> <span class="n">srsDimension</span><span class="o">=</span><span class="s2">&quot;3&quot;</span><span class="o">&gt;</span><span class="mi">19</span> <span class="mi">20</span> <span class="mi">21</span> <span class="mi">22</span> <span class="mi">23</span> <span class="mi">24</span> <span class="mi">25</span> <span class="mi">26</span> <span class="mi">27</span> <span class="mi">19</span> <span class="mi">20</span> <span class="mi">21</span><span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">posList</span><span class="o">&gt;</span>
               <span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">LinearRing</span><span class="o">&gt;</span>
           <span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">interior</span><span class="o">&gt;</span>
       <span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">PolygonPatch</span><span class="o">&gt;</span>
   <span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">polygonPatches</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">gml</span><span class="p">:</span><span class="n">PolyhedralSurface</span><span class="o">&gt;</span><span class="s2">&quot;&quot;&quot;</span>

<span class="s2">gets parsed to &#39;POLYHEDRALSURFACE Z (((1 2 3,4 5 6,7 8 9,1 2 3)),((10 11 12,13 14 15,16 17 18,10 11 12),(19 20 21,22 23 24,25 26 27,19 20 21)))&#39;</span>

<span class="s2">Each PolygonPatch/Patch corresponds to one Polygon in a PolyhedralSurface.</span>

<span class="s2">Finally, &#39;POLYHEDRALSURFACE EMPTY&#39; parses to</span>
<span class="s2">&#39;&lt;gml:PolyhedralSurface&gt;</span>
<span class="s2">    &lt;gml:polygonPatches&gt;</span>
<span class="s2">    &lt;/gml:polygonPatches&gt;</span>
<span class="s2">&lt;/gml:PolyhedralSurface&gt;&#39;</span>
</pre></div>
</div>
<p>Note that on the writing side those geometries are only generated for a
GML 3 output.</p>
</div>
<div class="section" id="dxf">
<h3>DXF<a class="headerlink" href="#dxf" title="Permalink to this headline">¶</a></h3>
<p>The changes in the DXF driver include converting a PolyFaceMesh (a
subtype of PolyLine) to PolyhedralSurface. This is illustrated by a bug
on the GDAL trac -
<a class="reference external" href="https://trac.osgeo.org/gdal/ticket/6246">https://trac.osgeo.org/gdal/ticket/6246</a>.
A PolyFace Mesh consists of points defined initially using specific
codes, then these points are described as part of a polygon (a polygon
can have four points at the maximum). Reading the PolyFace Mesh is
supported in OGR as of now, but write support for it as well (though not
implemented by me in this changeset) should be possible as well now.</p>
</div>
<div class="section" id="geopackage">
<h3>GeoPackage<a class="headerlink" href="#geopackage" title="Permalink to this headline">¶</a></h3>
<p>The GeoPackage specification supports [Multi]Point, [Multi]LineString,
[Multi]Polygon and GeometryCollection in its core. Curve geometry types
are mentioned as a registered extension. But Triangle,
PolyhedralSurface or TIN are not mentioned at all. However the
GeoPackage geometry blob format being based on ISO WKB, support for the
new geometry types did not really require new code. Hence we have kepts
this possibility of reading/writing the 3 new geometry types, but with a
warning emitted that a non-standard extension will be used on the
writing side.</p>
</div>
<div class="section" id="other-drivers">
<h3>Other drivers<a class="headerlink" href="#other-drivers" title="Permalink to this headline">¶</a></h3>
<p>The CSV, VRT, PGDump, SQLite (but not Spatialite) drivers support the
new geometry types. A couple of drivers have been modified, so as not to
crash on the writing side when being provided with the new geometry
types. Besides the previously mentioned drivers, the following drivers
have been verified to not crash (but potentially error out, or skip
unrecognized geometries): MySQL, OCI, KML, LIBKML, GeoJSON, MapInfo</p>
</div>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>Using standard Doxygen documentation procedure.</p>
</div>
<div class="section" id="compatibility">
<h2>Compatibility<a class="headerlink" href="#compatibility" title="Permalink to this headline">¶</a></h2>
<p>Many applications will not be able to properly deal with the new
geometry types that may now be returned by some drivers. In GDAL 2.1,
the new types were introduced mentioning that they might be returned by
GDAL in the future. Code should either skip the new geometries, deal
with them properly or use the OGR_G_ForceTo() function to convert to a
geometry type it supports.</p>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h2>
<p>Very few changes have been made so that the existing autotest suite
still passes. New geometry classes and conversion methods has been added
to ogr_geom.py and ogr_gml_geom.py. Updated drivers have received new
tests also.</p>
</div>
<div class="section" id="implementation">
<h2>Implementation<a class="headerlink" href="#implementation" title="Permalink to this headline">¶</a></h2>
<p>Done by Avyav Kumar Singh, under the Google Summer of Code 2016 program,
and fine tuned / extended / integrated by Even Rouault.</p>
<p>The proposed implementation lies in the “gsoc-triangle-ps-tin-rebased”
branch of the
<a class="reference external" href="https://github.com/rouault/gdal2/tree/gsoc-triangle-ps-tin-rebased">https://github.com/rouault/gdal2/tree/gsoc-triangle-ps-tin-rebased</a>
repository.</p>
</div>
<div class="section" id="voting-history">
<h2>Voting history<a class="headerlink" href="#voting-history" title="Permalink to this headline">¶</a></h2>
<p>+1 from JukkaR, DanielM, HowardB and EvenR</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="rfc65_rfc7946_geojson.html" class="btn btn-neutral float-right" title="RFC 65: RFC 7946 GeoJSON" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rfc63_sparse_datasets_improvements.html" class="btn btn-neutral float-left" title="RFC 63 : Sparse datasets improvements" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2020 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>