<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GDAL: ogr_geocoding.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GDAL
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_95e959066acc6fd9509e74b3cd6c200f.html">ogr</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">ogr_geocoding.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>C API for geocoding client.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="cpl__port_8h_source.html">cpl_port.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="ogr__api_8h_source.html">ogr_api.h</a>&quot;</code><br />
</div>
<p><a href="ogr__geocoding_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aff483fec2bcb4aaf5da5b65b97d94f51"><td class="memItemLeft" align="right" valign="top"><a id="aff483fec2bcb4aaf5da5b65b97d94f51"></a>
typedef struct _OGRGeocodingSessionHS *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ogr__geocoding_8h.html#aff483fec2bcb4aaf5da5b65b97d94f51">OGRGeocodingSessionH</a></td></tr>
<tr class="memdesc:aff483fec2bcb4aaf5da5b65b97d94f51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Opaque type for a geocoding session. <br /></td></tr>
<tr class="separator:aff483fec2bcb4aaf5da5b65b97d94f51"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac3e12320a8046248b992fd0ce4731903"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ogr__geocoding_8h.html#aff483fec2bcb4aaf5da5b65b97d94f51">OGRGeocodingSessionH</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ogr__geocoding_8h.html#ac3e12320a8046248b992fd0ce4731903">OGRGeocodeCreateSession</a> (char **papszOptions)</td></tr>
<tr class="memdesc:ac3e12320a8046248b992fd0ce4731903"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a session handle for geocoding requests.  <a href="#ac3e12320a8046248b992fd0ce4731903">More...</a><br /></td></tr>
<tr class="separator:ac3e12320a8046248b992fd0ce4731903"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa63dc51f49e998ef667bff176e9986c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ogr__geocoding_8h.html#aaa63dc51f49e998ef667bff176e9986c">OGRGeocodeDestroySession</a> (<a class="el" href="ogr__geocoding_8h.html#aff483fec2bcb4aaf5da5b65b97d94f51">OGRGeocodingSessionH</a> hSession)</td></tr>
<tr class="memdesc:aaa63dc51f49e998ef667bff176e9986c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys a session handle for geocoding requests.  <a href="#aaa63dc51f49e998ef667bff176e9986c">More...</a><br /></td></tr>
<tr class="separator:aaa63dc51f49e998ef667bff176e9986c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b0382ceb7e3935d7fe1da2adada564e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ogr__api_8h.html#a635095fa23dfea934f4bb2df38fb9a67">OGRLayerH</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ogr__geocoding_8h.html#a2b0382ceb7e3935d7fe1da2adada564e">OGRGeocode</a> (<a class="el" href="ogr__geocoding_8h.html#aff483fec2bcb4aaf5da5b65b97d94f51">OGRGeocodingSessionH</a> hSession, const char *pszQuery, char **papszStructuredQuery, char **papszOptions)</td></tr>
<tr class="memdesc:a2b0382ceb7e3935d7fe1da2adada564e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs a geocoding request.  <a href="#a2b0382ceb7e3935d7fe1da2adada564e">More...</a><br /></td></tr>
<tr class="separator:a2b0382ceb7e3935d7fe1da2adada564e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd49f38501af49461928469495861617"><td class="memItemLeft" align="right" valign="top"><a class="el" href="ogr__api_8h.html#a635095fa23dfea934f4bb2df38fb9a67">OGRLayerH</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ogr__geocoding_8h.html#abd49f38501af49461928469495861617">OGRGeocodeReverse</a> (<a class="el" href="ogr__geocoding_8h.html#aff483fec2bcb4aaf5da5b65b97d94f51">OGRGeocodingSessionH</a> hSession, double dfLon, double dfLat, char **papszOptions)</td></tr>
<tr class="memdesc:abd49f38501af49461928469495861617"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs a reverse geocoding request.  <a href="#abd49f38501af49461928469495861617">More...</a><br /></td></tr>
<tr class="separator:abd49f38501af49461928469495861617"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a463f7364dbcbc080ab442f681bdb7e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="ogr__geocoding_8h.html#a1a463f7364dbcbc080ab442f681bdb7e">OGRGeocodeFreeResult</a> (<a class="el" href="ogr__api_8h.html#a635095fa23dfea934f4bb2df38fb9a67">OGRLayerH</a> hLayer)</td></tr>
<tr class="memdesc:a1a463f7364dbcbc080ab442f681bdb7e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys the result of a geocoding request.  <a href="#a1a463f7364dbcbc080ab442f681bdb7e">More...</a><br /></td></tr>
<tr class="separator:a1a463f7364dbcbc080ab442f681bdb7e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>C API for geocoding client. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a2b0382ceb7e3935d7fe1da2adada564e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b0382ceb7e3935d7fe1da2adada564e">&#9670;&nbsp;</a></span>OGRGeocode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ogr__api_8h.html#a635095fa23dfea934f4bb2df38fb9a67">OGRLayerH</a> OGRGeocode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ogr__geocoding_8h.html#aff483fec2bcb4aaf5da5b65b97d94f51">OGRGeocodingSessionH</a>&#160;</td>
          <td class="paramname"><em>hSession</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pszQuery</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>papszStructuredQuery</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>papszOptions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs a geocoding request. </p>
<p>If the result is not found in cache, a GET request will be sent to resolve the query.</p>
<p>Note: most online services have Term of Uses. You are kindly requested to read and follow them. For the OpenStreetMap Nominatim service, this implementation will make sure that no more than one request is sent by second, but there might be other restrictions that you must follow by other means.</p>
<p>In case of success, the return of this function is a OGR layer that contain zero, one or several features matching the query. Note that the geometry of the features is not necessarily a point. The returned layer must be freed with <a class="el" href="ogr__geocoding_8h.html#a1a463f7364dbcbc080ab442f681bdb7e" title="Destroys the result of a geocoding request. ">OGRGeocodeFreeResult()</a>.</p>
<p>Note: this function is also available as the SQL <a href="ogr_sql_sqlite.html#ogr_sql_sqlite_ogr_geocode_function">ogr_geocode()</a> function of the SQL SQLite dialect.</p>
<p>The list of recognized options is : </p><ul>
<li>
ADDRESSDETAILS=0 or 1: Include a breakdown of the address into elements Defaults to 1. (Known to work with OSM and MapQuest Nominatim) </li>
<li>
COUNTRYCODES=code1,code2,...codeN: Limit search results to a specific country (or a list of countries). The codes must fellow ISO 3166-1, i.e. gb for United Kingdom, de for Germany, etc.. (Known to work with OSM and MapQuest Nominatim) </li>
<li>
LIMIT=number: the number of records to return. Unlimited if not specified. (Known to work with OSM and MapQuest Nominatim) </li>
<li>
RAW_FEATURE=YES: to specify that a 'raw' field must be added to the returned feature with the raw XML content. </li>
<li>
EXTRA_QUERY_PARAMETERS=params: additional parameters for the GET request. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hSession</td><td>the geocoding session handle. </td></tr>
    <tr><td class="paramname">pszQuery</td><td>the string to geocode. </td></tr>
    <tr><td class="paramname">papszStructuredQuery</td><td>unused for now. Must be NULL. </td></tr>
    <tr><td class="paramname">papszOptions</td><td>a list of options or NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a OGR layer with the result(s), or NULL in case of error. The returned layer must be freed with <a class="el" href="ogr__geocoding_8h.html#a1a463f7364dbcbc080ab442f681bdb7e" title="Destroys the result of a geocoding request. ">OGRGeocodeFreeResult()</a>.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>GDAL 1.10 </dd></dl>

</div>
</div>
<a id="ac3e12320a8046248b992fd0ce4731903"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3e12320a8046248b992fd0ce4731903">&#9670;&nbsp;</a></span>OGRGeocodeCreateSession()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ogr__geocoding_8h.html#aff483fec2bcb4aaf5da5b65b97d94f51">OGRGeocodingSessionH</a> OGRGeocodeCreateSession </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>papszOptions</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates a session handle for geocoding requests. </p>
<p>Available papszOptions values: </p><ul>
<li>
"CACHE_FILE" : Defaults to "ogr_geocode_cache.sqlite" (or otherwise "ogr_geocode_cache.csv" if the SQLite driver isn't available). Might be any CSV, SQLite or PostgreSQL datasource. </li>
<li>
"READ_CACHE" : "TRUE" (default) or "FALSE" </li>
<li>
"WRITE_CACHE" : "TRUE" (default) or "FALSE" </li>
<li>
"SERVICE": <a href="http://wiki.openstreetmap.org/wiki/Nominatim">"OSM_NOMINATIM"</a> (default), <a href="http://open.mapquestapi.com/nominatim/">"MAPQUEST_NOMINATIM"</a>, <a href="http://developer.yahoo.com/geo/placefinder/">"YAHOO"</a>, <a href="http://www.geonames.org/export/geonames-search.html">"GEONAMES"</a>, <a href="http://msdn.microsoft.com/en-us/library/ff701714.aspx">"BING"</a> or other value. Note: "YAHOO" is no longer available as a free service. </li>
<li>
"EMAIL": used by OSM_NOMINATIM. Optional, but recommended. </li>
<li>
"USERNAME": used by GEONAMES. Compulsory in that case. </li>
<li>
"KEY": used by BING. Compulsory in that case. </li>
<li>
"APPLICATION": used to set the User-Agent MIME header. Defaults to GDAL/OGR version string. </li>
<li>
"LANGUAGE": used to set the Accept-Language MIME header. Preferred language order for showing search results. </li>
<li>
"DELAY": minimum delay, in second, between 2 consecutive queries. Defaults to 1.0. </li>
<li>
"QUERY_TEMPLATE": URL template for GET requests. Must contain one and only one occurrence of %s in it. If not specified, for SERVICE=OSM_NOMINATIM, MAPQUEST_NOMINATIM, YAHOO, GEONAMES or BING, the URL template is hard-coded. </li>
<li>
"REVERSE_QUERY_TEMPLATE": URL template for GET requests for reverse geocoding. Must contain one and only one occurrence of {lon} and {lat} in it. If not specified, for SERVICE=OSM_NOMINATIM, MAPQUEST_NOMINATIM, YAHOO, GEONAMES or BING, the URL template is hard-coded. </li>
</ul>
<p>All the above options can also be set by defining the configuration option of the same name, prefixed by OGR_GEOCODE_. For example "OGR_GEOCODE_SERVICE" for the "SERVICE" option.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">papszOptions</td><td>NULL, or a NULL-terminated list of string options.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>an handle that should be freed with <a class="el" href="ogr__geocoding_8h.html#aaa63dc51f49e998ef667bff176e9986c" title="Destroys a session handle for geocoding requests. ">OGRGeocodeDestroySession()</a>, or NULL in case of failure.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>GDAL 1.10 </dd></dl>

</div>
</div>
<a id="aaa63dc51f49e998ef667bff176e9986c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa63dc51f49e998ef667bff176e9986c">&#9670;&nbsp;</a></span>OGRGeocodeDestroySession()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OGRGeocodeDestroySession </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ogr__geocoding_8h.html#aff483fec2bcb4aaf5da5b65b97d94f51">OGRGeocodingSessionH</a>&#160;</td>
          <td class="paramname"><em>hSession</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys a session handle for geocoding requests. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hSession</td><td>the handle to destroy.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>GDAL 1.10 </dd></dl>

</div>
</div>
<a id="a1a463f7364dbcbc080ab442f681bdb7e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a463f7364dbcbc080ab442f681bdb7e">&#9670;&nbsp;</a></span>OGRGeocodeFreeResult()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void OGRGeocodeFreeResult </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ogr__api_8h.html#a635095fa23dfea934f4bb2df38fb9a67">OGRLayerH</a>&#160;</td>
          <td class="paramname"><em>hLayer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys the result of a geocoding request. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hLayer</td><td>the layer returned by <a class="el" href="ogr__geocoding_8h.html#a2b0382ceb7e3935d7fe1da2adada564e" title="Runs a geocoding request. ">OGRGeocode()</a> or <a class="el" href="ogr__geocoding_8h.html#abd49f38501af49461928469495861617" title="Runs a reverse geocoding request. ">OGRGeocodeReverse()</a> to destroy.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>GDAL 1.10 </dd></dl>

</div>
</div>
<a id="abd49f38501af49461928469495861617"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd49f38501af49461928469495861617">&#9670;&nbsp;</a></span>OGRGeocodeReverse()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="ogr__api_8h.html#a635095fa23dfea934f4bb2df38fb9a67">OGRLayerH</a> OGRGeocodeReverse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="ogr__geocoding_8h.html#aff483fec2bcb4aaf5da5b65b97d94f51">OGRGeocodingSessionH</a>&#160;</td>
          <td class="paramname"><em>hSession</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dfLon</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>dfLat</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>papszOptions</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs a reverse geocoding request. </p>
<p>If the result is not found in cache, a GET request will be sent to resolve the query.</p>
<p>Note: most online services have Term of Uses. You are kindly requested to read and follow them. For the OpenStreetMap Nominatim service, this implementation will make sure that no more than one request is sent by second, but there might be other restrictions that you must follow by other means.</p>
<p>In case of success, the return of this function is a OGR layer that contain zero, one or several features matching the query. The returned layer must be freed with <a class="el" href="ogr__geocoding_8h.html#a1a463f7364dbcbc080ab442f681bdb7e" title="Destroys the result of a geocoding request. ">OGRGeocodeFreeResult()</a>.</p>
<p>Note: this function is also available as the SQL <a href="ogr_sql_sqlite.html#ogr_sql_sqlite_ogr_geocode_function">ogr_geocode_reverse()</a> function of the SQL SQLite dialect.</p>
<p>The list of recognized options is : </p><ul>
<li>
ZOOM=a_level: to query a specific zoom level. Only understood by the OSM Nominatim service. </li>
<li>
RAW_FEATURE=YES: to specify that a 'raw' field must be added to the returned feature with the raw XML content. </li>
<li>
EXTRA_QUERY_PARAMETERS=params: additional parameters for the GET request for reverse geocoding. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hSession</td><td>the geocoding session handle. </td></tr>
    <tr><td class="paramname">dfLon</td><td>the longitude. </td></tr>
    <tr><td class="paramname">dfLat</td><td>the latitude. </td></tr>
    <tr><td class="paramname">papszOptions</td><td>a list of options or NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a OGR layer with the result(s), or NULL in case of error. The returned layer must be freed with <a class="el" href="ogr__geocoding_8h.html#a1a463f7364dbcbc080ab442f681bdb7e" title="Destroys the result of a geocoding request. ">OGRGeocodeFreeResult()</a>.</dd></dl>
<dl class="section since"><dt>Since</dt><dd>GDAL 1.10 </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
