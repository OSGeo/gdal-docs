

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>COG – Cloud Optimized GeoTIFF generator &mdash; GDAL  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/gdal.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
  
  
  
    <link rel="canonical" href="https://gdal.orgdrivers/raster/cog.html"/>
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="COSAR – TerraSAR-X Complex SAR Data Product" href="cosar.html" />
    <link rel="prev" title="COASP – DRDC COASP SAR Processor Raster" href="coasp.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/gdalicon.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programs/index.html">Programs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Raster drivers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="aaigrid.html">AAIGrid – Arc/Info ASCII Grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="ace2.html">ACE2 – ACE2</a></li>
<li class="toctree-l2"><a class="reference internal" href="adrg.html">ADRG – ADRG/ARC Digitized Raster Graphics (.gen/.thf)</a></li>
<li class="toctree-l2"><a class="reference internal" href="aig.html">AIG – Arc/Info Binary Grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="airsar.html">AIRSAR – AIRSAR Polarimetric Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="arg.html">ARG – Azavea Raster Grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="bag.html">BAG – Bathymetry Attributed Grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="blx.html">BLX – Magellan BLX Topo File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="bmp.html">BMP – Microsoft Windows Device Independent Bitmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="bpg.html">BPG – Better Portable Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="bsb.html">BSB – Maptech/NOAA BSB Nautical Chart Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="bt.html">BT – VTP .bt Binary Terrain Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="byn.html">BYN - Natural Resources Canada’s Geoid file format (.byn)</a></li>
<li class="toctree-l2"><a class="reference internal" href="cad.html">CAD – AutoCAD DWG raster layer</a></li>
<li class="toctree-l2"><a class="reference internal" href="cals.html">CALS – CALS Type 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="ceos.html">CEOS – CEOS Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="coasp.html">COASP –  DRDC COASP SAR Processor Raster</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">COG – Cloud Optimized GeoTIFF generator</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#driver-capabilities">Driver capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creation-options">Creation Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#general-creation-options">General creation options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reprojection-related-creation-options">Reprojection related creation options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#file-format-details">File format details</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#high-level">High level</a></li>
<li class="toctree-l4"><a class="reference internal" href="#low-level">Low level</a></li>
<li class="toctree-l4"><a class="reference internal" href="#header-ghost-area">Header ghost area</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tile-data-leader-and-trailer">Tile data leader and trailer</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="cosar.html">COSAR – TerraSAR-X Complex SAR Data Product</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpg.html">CPG – Convair PolGASP data</a></li>
<li class="toctree-l2"><a class="reference internal" href="ctable2.html">CTable2 – CTable2 Datum Grid Shift</a></li>
<li class="toctree-l2"><a class="reference internal" href="ctg.html">CTG – USGS LULC Composite Theme Grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="daas.html">DAAS (Airbus DS Intelligence Data As A Service driver)</a></li>
<li class="toctree-l2"><a class="reference internal" href="db2.html">DB2 raster</a></li>
<li class="toctree-l2"><a class="reference internal" href="dds.html">DDS – DirectDraw Surface</a></li>
<li class="toctree-l2"><a class="reference internal" href="derived.html">DERIVED – Derived subdatasets driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="dimap.html">DIMAP – Spot DIMAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="dipex.html">DIPEx – ELAS DIPEx</a></li>
<li class="toctree-l2"><a class="reference internal" href="dods.html">DODS – OPeNDAP Grid Client</a></li>
<li class="toctree-l2"><a class="reference internal" href="doq1.html">DOQ1 – First Generation USGS DOQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="doq2.html">DOQ2 – New Labelled USGS DOQ</a></li>
<li class="toctree-l2"><a class="reference internal" href="dted.html">DTED – Military Elevation Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="e00grid.html">E00GRID – Arc/Info Export E00 GRID</a></li>
<li class="toctree-l2"><a class="reference internal" href="ecrgtoc.html">ECRGTOC – ECRG Table Of Contents (TOC.xml)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ecw.html">ECW – Enhanced Compressed Wavelets (.ecw)</a></li>
<li class="toctree-l2"><a class="reference internal" href="eedai.html">EEDAI - Google Earth Engine Data API Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="ehdr.html">EHdr – ESRI .hdr Labelled</a></li>
<li class="toctree-l2"><a class="reference internal" href="eir.html">EIR – Erdas Imagine Raw</a></li>
<li class="toctree-l2"><a class="reference internal" href="elas.html">ELAS - Earth Resources Laboratory Applications Software</a></li>
<li class="toctree-l2"><a class="reference internal" href="envi.html">ENVI – ENVI .hdr Labelled Raster</a></li>
<li class="toctree-l2"><a class="reference internal" href="epsilon.html">Epsilon - Wavelet compressed images</a></li>
<li class="toctree-l2"><a class="reference internal" href="esat.html">ESAT – Envisat Image Product</a></li>
<li class="toctree-l2"><a class="reference internal" href="esric.html">ESRIC – Esri Compact Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="ers.html">ERS – ERMapper .ERS</a></li>
<li class="toctree-l2"><a class="reference internal" href="exr.html">EXR – Extended Dynamic Range Image File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="fast.html">FAST – EOSAT FAST Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="fit.html">FIT – FIT</a></li>
<li class="toctree-l2"><a class="reference internal" href="fits.html">FITS – Flexible Image Transport System</a></li>
<li class="toctree-l2"><a class="reference internal" href="fujibas.html">FujiBAS – Fuji BAS Scanner Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="genbin.html">GenBin – Generic Binary (.hdr labelled)</a></li>
<li class="toctree-l2"><a class="reference internal" href="georaster.html">Oracle Spatial GeoRaster</a></li>
<li class="toctree-l2"><a class="reference internal" href="gff.html">GFF – Sandia National Laboratories GSAT File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="gif.html">GIF – Graphics Interchange Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="gmt.html">GMT – GMT Compatible netCDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpkg.html">GPKG – GeoPackage raster</a></li>
<li class="toctree-l2"><a class="reference internal" href="grass.html">GRASS Raster Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="grassasciigrid.html">GRASSASCIIGrid – GRASS ASCII Grid</a></li>
<li class="toctree-l2"><a class="reference internal" href="grib.html">GRIB – WMO General Regularly-distributed Information in Binary form</a></li>
<li class="toctree-l2"><a class="reference internal" href="gs7bg.html">GS7BG – Golden Software Surfer 7 Binary Grid File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="gsag.html">GSAG – Golden Software ASCII Grid File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="gsbg.html">GSBG – Golden Software Binary Grid File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="gsc.html">GSC – GSC Geogrid</a></li>
<li class="toctree-l2"><a class="reference internal" href="gta.html">GTA - Generic Tagged Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="gtiff.html">GTiff – GeoTIFF File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="gxf.html">GXF – Grid eXchange File</a></li>
<li class="toctree-l2"><a class="reference internal" href="hdf4.html">HDF4 – Hierarchical Data Format Release 4 (HDF4)</a></li>
<li class="toctree-l2"><a class="reference internal" href="hdf5.html">HDF5 – Hierarchical Data Format Release 5 (HDF5)</a></li>
<li class="toctree-l2"><a class="reference internal" href="heif.html">HEIF / HEIC – ISO/IEC 23008-12:2017 High Efficiency Image File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="hf2.html">HF2 – HF2/HFZ heightfield raster</a></li>
<li class="toctree-l2"><a class="reference internal" href="hfa.html">HFA – Erdas Imagine .img</a></li>
<li class="toctree-l2"><a class="reference internal" href="ida.html">IDA – Image Display and Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="Idrisi.html">RST – Idrisi Raster Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="ignfheightasciigrid.html">IGNFHeightASCIIGrid – IGN-France height correction ASCII grids</a></li>
<li class="toctree-l2"><a class="reference internal" href="ilwis.html">ILWIS – Raster Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="intergraphraster.html">INGR – Intergraph Raster Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="iris.html">IRIS – Vaisala’s weather radar software format</a></li>
<li class="toctree-l2"><a class="reference internal" href="isce.html">ISCE – ISCE</a></li>
<li class="toctree-l2"><a class="reference internal" href="isg.html">ISG – International Service for the Geoid</a></li>
<li class="toctree-l2"><a class="reference internal" href="isis2.html">ISIS2 – USGS Astrogeology ISIS Cube (Version 2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="isis3.html">ISIS3 – USGS Astrogeology ISIS Cube (Version 3)</a></li>
<li class="toctree-l2"><a class="reference internal" href="jdem.html">JDEM – Japanese DEM (.mem)</a></li>
<li class="toctree-l2"><a class="reference internal" href="jp2ecw.html">JP2ECW – ERDAS JPEG2000 (.jp2)</a></li>
<li class="toctree-l2"><a class="reference internal" href="jp2kak.html">JP2KAK – JPEG-2000 (based on Kakadu)</a></li>
<li class="toctree-l2"><a class="reference internal" href="jp2lura.html">JP2Lura – JPEG2000 driver based on Lurawave library</a></li>
<li class="toctree-l2"><a class="reference internal" href="jp2mrsid.html">JP2MrSID – JPEG2000 via MrSID SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="jp2openjpeg.html">JP2OpenJPEG – JPEG2000 driver based on OpenJPEG library</a></li>
<li class="toctree-l2"><a class="reference internal" href="jpeg2000.html">JPEG2000 – Implementation of the JPEG-2000 part 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="jpegls.html">JPEGLS</a></li>
<li class="toctree-l2"><a class="reference internal" href="jpeg.html">JPEG – JPEG JFIF File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="jpipkak.html">JPIPKAK - JPIP Streaming</a></li>
<li class="toctree-l2"><a class="reference internal" href="kea.html">KEA</a></li>
<li class="toctree-l2"><a class="reference internal" href="kmlsuperoverlay.html">KMLSuperoverlay – KMLSuperoverlay</a></li>
<li class="toctree-l2"><a class="reference internal" href="kro.html">KRO – KOLOR Raw format</a></li>
<li class="toctree-l2"><a class="reference internal" href="lan.html">LAN – Erdas 7.x .LAN and .GIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="l1b.html">L1B – NOAA Polar Orbiter Level 1b Data Set (AVHRR)</a></li>
<li class="toctree-l2"><a class="reference internal" href="lcp.html">LCP – FARSITE v.4 LCP Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="leveller.html">Leveller – Daylon Leveller Heightfield</a></li>
<li class="toctree-l2"><a class="reference internal" href="loslas.html">LOSLAS – NADCON .los/.las Datum Grid Shift</a></li>
<li class="toctree-l2"><a class="reference internal" href="map.html">MAP – OziExplorer .MAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="marfa.html">MRF – Meta Raster Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="mbtiles.html">MBTiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="mem.html">MEM – In Memory Raster</a></li>
<li class="toctree-l2"><a class="reference internal" href="mff.html">MFF – Vexcel MFF Raster</a></li>
<li class="toctree-l2"><a class="reference internal" href="mff2.html">MFF2 – Vexcel MFF2 Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="mg4lidar.html">MG4Lidar – MrSID/MG4 LiDAR Compression / Point Cloud View files</a></li>
<li class="toctree-l2"><a class="reference internal" href="mrsid.html">MrSID – Multi-resolution Seamless Image Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="msg.html">MSG – Meteosat Second Generation</a></li>
<li class="toctree-l2"><a class="reference internal" href="msgn.html">MSGN – Meteosat Second Generation (MSG) Native Archive Format (.nat)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ndf.html">NDF – NLAPS Data Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="netcdf.html">NetCDF: Network Common Data Form</a></li>
<li class="toctree-l2"><a class="reference internal" href="ngsgeoid.html">NGSGEOID - NOAA NGS Geoid Height Grids</a></li>
<li class="toctree-l2"><a class="reference internal" href="ngw.html">NGW – NextGIS Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="nitf.html">NITF – National Imagery Transmission Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="ntv1.html">NTv1 – NTv1 Datum Grid Shift</a></li>
<li class="toctree-l2"><a class="reference internal" href="ntv2.html">NTv2 – NTv2 Datum Grid Shift</a></li>
<li class="toctree-l2"><a class="reference internal" href="nwtgrd.html">NWT_GRD/NWT_GRC – Northwood/Vertical Mapper File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="ogcapi.html">OGCAPI – OGC API Tiles / Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="ozi.html">OZI – OZF2/OZFX3 raster</a></li>
<li class="toctree-l2"><a class="reference internal" href="palsar.html">JAXA PALSAR Processed Products</a></li>
<li class="toctree-l2"><a class="reference internal" href="paux.html">PAux – PCI .aux Labelled Raw Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="pcidsk.html">PCIDSK – PCI Geomatics Database File</a></li>
<li class="toctree-l2"><a class="reference internal" href="pcraster.html">PCRaster – PCRaster raster file format</a></li>
<li class="toctree-l2"><a class="reference internal" href="pdf.html">PDF – Geospatial PDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="pds.html">PDS – Planetary Data System v3</a></li>
<li class="toctree-l2"><a class="reference internal" href="pds4.html">PDS4 – NASA Planetary Data System (Version 4)</a></li>
<li class="toctree-l2"><a class="reference internal" href="plmosaic.html">PLMosaic (Planet Labs Mosaics API)</a></li>
<li class="toctree-l2"><a class="reference internal" href="png.html">PNG – Portable Network Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="pnm.html">PNM – Netpbm (.pgm, .ppm)</a></li>
<li class="toctree-l2"><a class="reference internal" href="postgisraster.html">PostGISRaster – PostGIS Raster driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="prf.html">PHOTOMOD Raster File</a></li>
<li class="toctree-l2"><a class="reference internal" href="rasdaman.html">Rasdaman GDAL driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="rasterlite.html">Rasterlite - Rasters in SQLite DB</a></li>
<li class="toctree-l2"><a class="reference internal" href="rasterlite2.html">RasterLite2 - Rasters in SQLite DB</a></li>
<li class="toctree-l2"><a class="reference internal" href="r.html">R – R Object Data Store</a></li>
<li class="toctree-l2"><a class="reference internal" href="rda.html">RDA (DigitalGlobe Raster Data Access)</a></li>
<li class="toctree-l2"><a class="reference internal" href="rdb.html">RDB - <em>RIEGL</em> Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="rik.html">RIK – Swedish Grid Maps</a></li>
<li class="toctree-l2"><a class="reference internal" href="rmf.html">RMF – Raster Matrix Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="roi_pac.html">ROI_PAC – ROI_PAC</a></li>
<li class="toctree-l2"><a class="reference internal" href="rpftoc.html">RPFTOC – Raster Product Format/RPF (a.toc)</a></li>
<li class="toctree-l2"><a class="reference internal" href="rraster.html">RRASTER – R Raster</a></li>
<li class="toctree-l2"><a class="reference internal" href="rs2.html">RS2 – RadarSat 2 XML Product</a></li>
<li class="toctree-l2"><a class="reference internal" href="safe.html">SAFE – Sentinel-1 SAFE XML Product</a></li>
<li class="toctree-l2"><a class="reference internal" href="sar_ceos.html">SAR_CEOS – CEOS SAR Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="sdat.html">SAGA – SAGA GIS Binary Grid File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="sdts.html">SDTS – USGS SDTS DEM</a></li>
<li class="toctree-l2"><a class="reference internal" href="sentinel2.html">SENTINEL2 – Sentinel-2 Products</a></li>
<li class="toctree-l2"><a class="reference internal" href="sgi.html">SGI – SGI Image Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="sigdem.html">SIGDEM – Scaled Integer Gridded DEM</a></li>
<li class="toctree-l2"><a class="reference internal" href="snodas.html">SNODAS – Snow Data Assimilation System</a></li>
<li class="toctree-l2"><a class="reference internal" href="srp.html">SRP – Standard Product Format (ASRP/USRP) (.gen)</a></li>
<li class="toctree-l2"><a class="reference internal" href="srtmhgt.html">SRTMHGT – SRTM HGT Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="stacta.html">STACTA - Spatio-Temporal Asset Catalog Tiled Assets</a></li>
<li class="toctree-l2"><a class="reference internal" href="terragen.html">Terragen – Terragen™ Terrain File</a></li>
<li class="toctree-l2"><a class="reference internal" href="tga.html">TGA – TARGA Image File Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="til.html">TIL – EarthWatch/DigitalGlobe .TIL</a></li>
<li class="toctree-l2"><a class="reference internal" href="tiledb.html">TileDB - TileDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="tsx.html">TSX –  TerraSAR-X Product</a></li>
<li class="toctree-l2"><a class="reference internal" href="usgsdem.html">USGSDEM – USGS ASCII DEM (and CDED)</a></li>
<li class="toctree-l2"><a class="reference internal" href="vicar.html">VICAR – VICAR</a></li>
<li class="toctree-l2"><a class="reference internal" href="vrt.html">VRT – GDAL Virtual Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="wcs.html">WCS – OGC Web Coverage Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="webp.html">WEBP - WEBP</a></li>
<li class="toctree-l2"><a class="reference internal" href="wms.html">WMS – Web Map Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="wmts.html">WMTS – OGC Web Map Tile Service</a></li>
<li class="toctree-l2"><a class="reference internal" href="xpm.html">XPM – X11 Pixmap</a></li>
<li class="toctree-l2"><a class="reference internal" href="xyz.html">XYZ – ASCII Gridded XYZ</a></li>
<li class="toctree-l2"><a class="reference internal" href="zmap.html">ZMap – ZMap Plus Grid</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../vector/index.html">Vector drivers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">How to contribute?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GDAL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html"> GDAL  documentation </a> &raquo;</li>
      
          <li><a href="index.html">Raster drivers</a> &raquo;</li>
      
      <li>COG – Cloud Optimized GeoTIFF generator</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit//master/gdal/doc/source/drivers/raster/cog.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="cosar.html" class="btn btn-neutral float-right" title="COSAR – TerraSAR-X Complex SAR Data Product" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="coasp.html" class="btn btn-neutral float-left" title="COASP – DRDC COASP SAR Processor Raster" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="cog-cloud-optimized-geotiff-generator">
<span id="raster-cog"></span><h1>COG – Cloud Optimized GeoTIFF generator<a class="headerlink" href="#cog-cloud-optimized-geotiff-generator" title="Permalink to this headline">¶</a></h1>
<div class="versionadded">
<p><span class="versionmodified added">New in version 3.1.</span></p>
</div>
<div class="admonition shortname" id="shortname-0">
<p class="admonition-title">Driver short name</p>
<p>COG</p>
</div>
<div class="admonition built_in_by_default" id="built_in_by_default-0">
<p class="admonition-title">Driver built-in by default</p>
<p>This driver is built-in by default</p>
</div>
<p>This driver supports the creation of Cloud Optimized GeoTIFF (COG)</p>
<p>It essentially relies upon the <a class="reference internal" href="gtiff.html#raster-gtiff"><span class="std std-ref">GTiff – GeoTIFF File Format</span></a> driver with the
<code class="docutils literal notranslate"><span class="pre">COPY_SRC_OVERVIEWS=YES</span></code> creation option, but automatically does the needed
preprocessing stages (reprojection if asked and creation of overviews on
imagery and/or mask) if not already
done, and also takes care of morphing the input dataset into the expected form
when using some compression types (for example a RGBA dataset will be transparently
converted to a RGB+mask dataset when selecting JPEG compression)</p>
<div class="section" id="driver-capabilities">
<h2>Driver capabilities<a class="headerlink" href="#driver-capabilities" title="Permalink to this headline">¶</a></h2>
<div class="admonition supports_createcopy" id="supports_createcopy-0">
<p class="admonition-title">Supports CreateCopy()</p>
<p>This driver supports the <a class="reference internal" href="../../api/gdaldriver_cpp.html#_CPPv4N10GDALDriver10CreateCopyEPKcP11GDALDatasetiPPc16GDALProgressFuncPv" title="GDALDriver::CreateCopy"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALDriver::CreateCopy()</span></code></a> operation</p>
</div>
<div class="admonition supports_georeferencing" id="supports_georeferencing-0">
<p class="admonition-title">Supports Georeferencing</p>
<p>This driver supports georeferencing</p>
</div>
<div class="admonition supports_virtualio" id="supports_virtualio-0">
<p class="admonition-title">Supports VirtualIO</p>
<p>This driver supports <a class="reference internal" href="../../user/virtual_file_systems.html#virtual-file-systems"><span class="std std-ref">virtual I/O operations (/vsimem/, etc.)</span></a></p>
</div>
</div>
<div class="section" id="creation-options">
<h2>Creation Options<a class="headerlink" href="#creation-options" title="Permalink to this headline">¶</a></h2>
<div class="section" id="general-creation-options">
<h3>General creation options<a class="headerlink" href="#general-creation-options" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p><strong>BLOCKSIZE=n</strong>: Sets the tile width and height in pixels. Defaults to 512.</p></li>
<li><p><strong>COMPRESS=[NONE/LZW/JPEG/DEFLATE/ZSTD/WEBP/LERC/LERC_DEFLATE/LERC_ZSTD]</strong>: Set the compression to use.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">JPEG</span></code> should generally only be used with
Byte data (8 bit per channel). But if GDAL is built with internal libtiff and
libjpeg, it is    possible to read and write TIFF files with 12bit JPEG compressed TIFF
files (seen as UInt16 bands with NBITS=12). See the <a class="reference external" href="http://trac.osgeo.org/gdal/wiki/TIFF12BitJPEG">“8 and 12 bit
JPEG in TIFF”</a> wiki
page for more details.
For the COG driver, JPEG compression for 3 or 4-band images automatically
selects the PHOTOMETRIC=YCBCR colorspace with a 4:2:2 subsampling of the Y,Cb,Cr
components.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LZW</span></code>, <code class="docutils literal notranslate"><span class="pre">DEFLATE</span></code> and <code class="docutils literal notranslate"><span class="pre">ZSTD</span></code> compressions can be used with the PREDICTOR creation option.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ZSTD</span></code> is available when using internal libtiff and if GDAL built against
libzstd &gt;=1.0, or if built against external libtiff with zstd support.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LERC</span></code> is available when using internal libtiff.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LERC_ZSTD</span></code> is available when <code class="docutils literal notranslate"><span class="pre">LERC</span></code> and <code class="docutils literal notranslate"><span class="pre">ZSTD</span></code> are available.</p></li>
</ul>
</li>
<li><p><strong>LEVEL=integer_value</strong>: DEFLATE/ZSTD/LERC_DEFLATE/LERC_ZSTD compression level.
A lower number will
result in faster compression but less efficient compression rate.
1 is the fastest.</p>
<ul class="simple">
<li><p>For DEFLATE, 9 is the slowest/higher compression rate
(or 12 when using a libtiff with libdeflate support). The default is 6.</p></li>
<li><p>For ZSTD, 22 is the slowest/higher compression rate. The default is 9.</p></li>
</ul>
</li>
<li><p><strong>MAX_Z_ERROR=threshold</strong>: Set the maximum error threshold on values
for LERC/LERC_DEFLATE/LERC_ZSTD compression. The default is 0
(lossless).</p></li>
<li><p><strong>QUALITY=integer_value</strong>: JPEG/WEBP quality setting. A value of 100 is best
quality (least compression), and 1 is worst quality (best compression).
The default is 75. For WEBP, QUALITY=100 automatically turns on lossless mode.</p></li>
<li><p><strong>NUM_THREADS=number_of_threads/ALL_CPUS</strong>: Enable
multi-threaded compression by specifying the number of worker
threads. Default is compression in the main thread. This also determines
the number of threads used when reprojection is done with the TILING_SCHEME
or TARGET_SRS creation options. (Overview generation is also multithreaded since
GDAL 3.2)</p></li>
<li><p><strong>PREDICTOR=[YES/NO/STANDARD/FLOATING_POINT]</strong>: Set the predictor for LZW,
DEFLATE and ZSTD compression. The default is NO. If YES is specified, then
standard predictor (Predictor=2) is used for integer data type,
and floating-point predictor (Predictor=3) for floating point data type (in
some circumstances, the standard predictor might perform better than the
floating-point one on floating-point data). STANDARD or FLOATING_POINT can
also be used to select the precise algorithm wished.</p></li>
<li><p><strong>BIGTIFF=YES/NO/IF_NEEDED/IF_SAFER</strong>: Control whether the created
file is a BigTIFF or a classic TIFF.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">YES</span></code> forces BigTIFF.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NO</span></code> forces classic TIFF.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IF_NEEDED</span></code> will only create a BigTIFF if it is clearly needed (in
the uncompressed case, and image larger than 4GB. So no effect
when using a compression).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IF_SAFER</span></code> will create BigTIFF if the resulting file *might*
exceed 4GB. Note: this is only a heuristics that might not always
work depending on compression ratios.</p></li>
</ul>
<p>BigTIFF is a TIFF variant which can contain more than 4GiB of data
(size of classic TIFF is limited by that value). This option is
available if GDAL is built with libtiff library version 4.0 or
higher. The default is IF_NEEDED.</p>
<p>When creating a new GeoTIFF with no compression, GDAL computes in
advance the size of the resulting file. If that computed file size is
over 4GiB, GDAL will automatically decide to create a BigTIFF file.
However, when compression is used, it is not possible in advance to
known the final size of the file, so classical TIFF will be chosen.
In that case, the user must explicitly require the creation of a
BigTIFF with BIGTIFF=YES if the final file is anticipated to be too
big for classical TIFF format. If BigTIFF creation is not explicitly
asked or guessed and the resulting file is too big for classical
TIFF, libtiff will fail with an error message like
“TIFFAppendToStrip:Maximum TIFF file size exceeded”.</p>
</li>
<li><p><strong>RESAMPLING=[NEAREST/AVERAGE/BILINEAR/CUBIC/CUBICSPLINE/LANCZOS]</strong>:
Resampling method used for overview generation or reprojection.
For paletted images,
NEAREST is used by default, otherwise it is CUBIC.</p></li>
<li><p><strong>OVERVIEW_RESAMPLING=[NEAREST/AVERAGE/BILINEAR/CUBIC/CUBICSPLINE/LANCZOS]</strong>:
(since GDAL 3.2)
Resampling method used for overview generation.
For paletted images, NEAREST is used by default, otherwise it is CUBIC.
This overrides, for overview generation, the value of <code class="docutils literal notranslate"><span class="pre">RESAMPLING</span></code> if it specified.</p></li>
<li><p><strong>WARP_RESAMPLING=[NEAREST/AVERAGE/BILINEAR/CUBIC/CUBICSPLINE/LANCZOS]</strong>:
(since GDAL 3.2)
Resampling method used for reprojection.
For paletted images, NEAREST is used by default, otherwise it is CUBIC.
This overrides, for reprojection, the value of <code class="docutils literal notranslate"><span class="pre">RESAMPLING</span></code> if it specified.</p></li>
<li><p><strong>OVERVIEWS=[AUTO/IGNORE_EXISTING/FORCE_USE_EXISTING/NONE]</strong>: Describe the behavior
regarding overview generation and use of source overviews.</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">AUTO</span></code> (default): source overviews will be
used if present (even if the dimension of the smallest level is not &lt; 512 pixels),
and, if not present, overviews will be automatically generated in the
output file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IGNORE_EXISTING</span></code>: potential existing overviews on the source dataset will
be ignored and new overviews will be automatically generated.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">FORCE_USE_EXISTING</span></code>: potential existing overviews on the source will
be used (even if the dimension of the smallest level is not &lt; 512 pixels).
If there is no source overview, this is equivalent to specifying <code class="docutils literal notranslate"><span class="pre">NONE</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NONE</span></code>: potential source overviews will be ignored, and no overview will be
generated.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using the gdal_translate utility, source overviews will not be
available if general options (i.e. options which are not creation options,
like subsetting, etc.) are used.</p>
</div>
</li>
</ul>
</li>
<li><p><strong>GEOTIFF_VERSION=[AUTO/1.0/1.1]</strong>: Select the version of
the GeoTIFF standard used to encode georeferencing information. <code class="docutils literal notranslate"><span class="pre">1.0</span></code>
corresponds to the original
<a class="reference external" href="http://geotiff.maptools.org/spec/geotiffhome.html">1995, GeoTIFF Revision 1.0, by Ritter &amp; Ruth</a>.
<code class="docutils literal notranslate"><span class="pre">1.1</span></code> corresponds to the OGC standard 19-008, which is an evolution of 1.0,
which clear ambiguities and fix inconsistencies mostly in the processing of
the vertical part of a CRS.
<code class="docutils literal notranslate"><span class="pre">AUTO</span></code> mode (default value) will generally select 1.0, unless the CRS to
encode has a vertical component or is a 3D CRS, in which case 1.1 is used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Write support for GeoTIFF 1.1 requires libgeotiff 1.6.0 or later.</p>
</div>
</li>
<li><dl class="simple">
<dt><strong>SPARSE_OK=TRUE/FALSE</strong> ((GDAL &gt;= 3.2): Should empty blocks be</dt><dd><p>omitted on disk? When this option is set, any attempt of writing a
block whose all pixels are 0 or the nodata value will cause it not to
be written at all (unless there is a corresponding block already
allocated in the file). Sparse files have 0 tile/strip offsets for
blocks never written and save space; however, most non-GDAL packages
cannot read such files.
On the reading side, the presence of a omitted tile after a non-empty one
may cause optimized readers to have to issue an extra GET request to the
TileByteCounts array.
The default is FALSE.</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="reprojection-related-creation-options">
<h3>Reprojection related creation options<a class="headerlink" href="#reprojection-related-creation-options" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>TILING_SCHEME=CUSTOM/GoogleMapsCompatible/other</strong>: Default value: CUSTOM.
If set to a value different than CUSTOM, the definition of the specified tiling
scheme will be used to reproject the dataset to its CRS, select the resolution
corresponding to the closest zoom level and align on tile boundaries at this
resolution. The tile size indicated in the tiling scheme definition (generally
256 pixels) will be used, unless the user has specified a value with the
BLOCKSIZE creation option, in which case the user specified one will be taken
into account (that is if setting a higher value than 256, the original
tiling scheme is modified to take into account the size of the HiDPi tiles).
In non-CUSTOM mode, TARGET_SRS, RES and EXTENT options are ignored.
Starting with GDAL 3.2, the value of TILING_SCHEME can also be the filename
of a JSON file according to the <a class="reference external" href="http://docs.opengeospatial.org/is/17-083r2/17-083r2.html">OGC Two Dimensional Tile Matrix Set standard</a>,
a URL to such file, the radical of a definition file in the GDAL data directory
(e.g. <code class="docutils literal notranslate"><span class="pre">FOO</span></code> for a file named <code class="docutils literal notranslate"><span class="pre">tms_FOO.json</span></code>) or the inline JSON definition.</p></li>
</ul>
<ul class="simple">
<li><p><strong>ZOOM_LEVEL_STRATEGY</strong>=AUTO/LOWER/UPPER. (GDAL &gt;= 3.2) Strategy to determine
zoom level. Only used for TILING_SCHEME different from CUSTOM.
LOWER will select the zoom level immediately below the
theoretical computed non-integral zoom level, leading to subsampling.
On the contrary, UPPER will select the immediately above zoom level,
leading to oversampling. Defaults to AUTO which selects the closest
zoom level.</p></li>
<li><p><strong>TARGET_SRS=string</strong>: to force reprojection of the input dataset to another
SRS. The string can be a WKT string, a EPSG:XXXX code or a PROJ string.</p></li>
<li><p><strong>RES=value</strong>: Set the resolution of the target raster, in the units of
TARGET_SRS. Only taken into account if TARGET_SRS is specified.</p></li>
<li><p><strong>EXTENT=minx,miny,maxx,maxy</strong>: Set the extent of the target raster, in the
units of TARGET_SRS. Only taken into account if TARGET_SRS is specified.</p></li>
<li><p><strong>ALIGNED_LEVELS=INT</strong>: Number of overview levels for which GeoTIFF tile and
tiles defined in the tiling scheme match. When specifying this option, padding tiles will be
added to the left and top sides of the target raster, when needed, so that
a GeoTIFF tile matches with a tile of the tiling scheme.
Only taken into account if TILING_SCHEME is different from CUSTOM.
For a tiling scheme whose consecutive zoom level resolutions differ by a
factor of 2, care must be taken in setting this value to a high number of
levels, as up to 2^(ALIGNED_LEVELS-1) tiles can be added in each dimension.
The driver enforces a hard limit of 10.</p></li>
<li><p><strong>ADD_ALPHA=YES/NO</strong>: Whether an alpha band is added in case of reprojection.
Defaults to YES.</p></li>
</ul>
</div>
</div>
<div class="section" id="file-format-details">
<h2>File format details<a class="headerlink" href="#file-format-details" title="Permalink to this headline">¶</a></h2>
<div class="section" id="high-level">
<h3>High level<a class="headerlink" href="#high-level" title="Permalink to this headline">¶</a></h3>
<p>A Cloud optimized GeoTIFF has the following characteristics:</p>
<ul class="simple">
<li><p>TIFF or BigTIFF file</p></li>
<li><p>Tiled (512 pixels by default) for imagery, mask and overviews</p></li>
<li><p>Overviews until the maximum dimension of the smallest overview level is
lower than 512 pixels.</p></li>
<li><p>Compressed or not</p></li>
<li><p>Pixel interleaving for multi-band dataset</p></li>
<li><p>Optimized layout of TIFF sections to minimize the number of GET requests
needed by a reader doing random read access.</p></li>
</ul>
</div>
<div class="section" id="low-level">
<h3>Low level<a class="headerlink" href="#low-level" title="Permalink to this headline">¶</a></h3>
<p>A COG file is organized as the following (if using libtiff &gt;= 4.0.11 or GDAL
internal libtiff. For other versions, the layout will be different and some of
the optimizations will not be available).</p>
<ul class="simple">
<li><p>TIFF/BigTIFF header/signature and pointer to first IFD (Image File Directory)</p></li>
<li><p>“ghost area” with COG optimizations (see <a class="reference internal" href="#header-ghost-area">Header ghost area</a>)</p></li>
<li><p>IFD of the full resolution image, followed by TIFF tags values, excluding the
TileOffsets and TileByteCounts arrays.</p></li>
<li><p>IFD of the mask of the full resolution image, if present, followed by TIFF
tags values, excluding the TileOffsets and TileByteCounts arrays.</p></li>
<li><p>IFD of the first (largest in dimensions) overview level, if present</p></li>
<li><p>…</p></li>
<li><p>IFD of the last (smallest) overview level, if present</p></li>
<li><p>IFD of the first (largest in dimensions) overview level of the mask, if present</p></li>
<li><p>…</p></li>
<li><p>IFD of the last (smallest) overview level of the mask, if present</p></li>
<li><p>TileOffsets and TileByteCounts arrays of the above IFDs</p></li>
<li><p>tile data of the smallest overview, if present (with each tile followed by the
corresponding tile of mask data, if present),
with <a class="reference internal" href="#cog-tile-data-leader-trailer"><span class="std std-ref">leader and trailer bytes</span></a></p></li>
<li><p>…</p></li>
<li><p>tile data of the largest overview, if present (interleaved with mask data if present)</p></li>
<li><p>tile data of the full resolution image, if present (interleaved with corresponding  mask data if present)</p></li>
</ul>
</div>
<div class="section" id="header-ghost-area">
<h3>Header ghost area<a class="headerlink" href="#header-ghost-area" title="Permalink to this headline">¶</a></h3>
<p>To describe the specific layout of COG files, a
description of the features used is located at the beginning of the file, so that
optimized readers (like GDAL) can use them and take shortcuts. Those features
are described as ASCII strings “hidden” just after the 8 first bytes of a
ClassicTIFF (or after the 16 first ons for a BigTIFF). That is the first IFD
starts just after those strings. It is completely valid to have <em>ghost</em>
areas like this in a TIFF file, and readers will normally skip over them. So
for a COG file with a transparency mask, those strings will be:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">GDAL_STRUCTURAL_METADATA_SIZE</span><span class="o">=</span><span class="mi">000174</span> <span class="nb">bytes</span>
<span class="n">LAYOUT</span><span class="o">=</span><span class="n">IFDS_BEFORE_DATA</span>
<span class="n">BLOCK_ORDER</span><span class="o">=</span><span class="n">ROW_MAJOR</span>
<span class="n">BLOCK_LEADER</span><span class="o">=</span><span class="n">SIZE_AS_UINT4</span>
<span class="n">BLOCK_TRAILER</span><span class="o">=</span><span class="n">LAST_4_BYTES_REPEATED</span>
<span class="n">KNOWN_INCOMPATIBLE_EDITION</span><span class="o">=</span><span class="n">NO</span>
<span class="n">MASK_INTERLEAVED_WITH_IMAGERY</span><span class="o">=</span><span class="n">YES</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>A newline character <cite>\n</cite> is used to separate those strings.</p></li>
<li><p>A space character is inserted after the newline following <cite>KNOWN_INCOMPATIBLE_EDITION=NO</cite></p></li>
<li><p>For a COG without mask, the <cite>MASK_INTERLEAVED_WITH_IMAGERY</cite> item will not be present of course.</p></li>
</ul>
</div>
<p>The ghost area starts with <code class="docutils literal notranslate"><span class="pre">GDAL_STRUCTURAL_METADATA_SIZE=XXXXXX</span> <span class="pre">bytes\n</span></code> (of
a fixed size of 43 bytes) where XXXXXX is a 6-digit number indicating the remaining
size of the section (that is starting after the linefeed character of this starting
line).</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LAYOUT=IFDS_BEFORE_DATA</span></code>: the IFDs are located at the beginning of the file.
GDAL will also makes sure that the tile index arrays are written
just after the IFDs and before the imagery, so that a first range request of
16 KB will always get all the IFDs</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BLOCK_ORDER=ROW_MAJOR</span></code>: (strile is a contraction of ‘strip or tile’) the
data for tiles is written in increasing tile id order. Future enhancements
could possibly implement other layouts.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BLOCK_LEADER=SIZE_AS_UINT4</span></code>: each tile data is preceded by 4 bytes, in a
<em>ghost</em> area as well, indicating the real tile size (in little endian order).
See <a class="reference internal" href="#tile-data-leader-and-trailer">Tile data leader and trailer</a> for more details.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BLOCK_TRAILER=LAST_4_BYTES_REPEATED</span></code>: just after the tile data, the last 4
bytes of the tile data are repeated. See <a class="reference internal" href="#tile-data-leader-and-trailer">Tile data leader and trailer</a> for more details.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">KNOWN_INCOMPATIBLE_EDITION=NO</span></code>: when a COG is generated this is always
written. If GDAL is then used to modify the COG file, as most of the changes
done on an existing COG file, will break the optimized structure, GDAL will
change this metadata item to KNOWN_INCOMPATIBLE_EDITION=YES, and issue a
warning on writing, and when reopening such file, so that users know they have
<em>broken</em> their COG file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">MASK_INTERLEAVED_WITH_IMAGERY=YES</span></code>: indicates that mask data immediately
follows imagery data. So when reading data at offset=TileOffset[i] - 4 and
size=TileOffset[i+1]-TileOffset[i]+4, you’ll get a buffer with:</p>
<blockquote>
<div><ul class="simple">
<li><p>leader with imagery tile size (4 bytes)</p></li>
<li><p>imagery data (starting at TileOffsets[i] and of size TileByteCounts[i])</p></li>
<li><p>trailer of imagery (4 bytes)</p></li>
<li><p>leader with mask tilesize (4 bytes)</p></li>
<li><p>mask data (starting at mask.TileOffsets[i] and of size
mask.TileByteCounts[i], but none of them actually need to be read)</p></li>
<li><p>trailer of mask data (4 bytes)</p></li>
</ul>
</div></blockquote>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The content of the header ghost area can be retrieved by getting the
<code class="docutils literal notranslate"><span class="pre">GDAL_STRUCTURAL_METADATA</span></code> metadata item of the <code class="docutils literal notranslate"><span class="pre">TIFF</span></code> metadata domain
on the datasett object (with GetMetadataItem())</p>
</div>
</div>
<div class="section" id="tile-data-leader-and-trailer">
<span id="cog-tile-data-leader-trailer"></span><h3>Tile data leader and trailer<a class="headerlink" href="#tile-data-leader-and-trailer" title="Permalink to this headline">¶</a></h3>
<p>Each tile data is immediately preceded by a leader, consisting of a unsigned 4-byte integer,
in little endian order, giving the number of bytes of <em>payload</em> of the tile data
that follows it. This leader is <em>ghost</em> in the sense that the
TileOffsets[] array does not point to it, but points to the real payload. Hence
the offset of the leader is TileOffsets[i]-4.</p>
<p>An optimized reader seeing the <code class="docutils literal notranslate"><span class="pre">BLOCK_LEADER=SIZE_AS_UINT4</span></code> metadata item will thus look for TileOffset[i]
and TileOffset[i+1] to deduce it must fetch the data starting at
offset=TileOffset[i] - 4 and of size=TileOffset[i+1]-TileOffset[i]+4. It then
checks the 4 first bytes to see if the size in this leader marker is
consistent with TileOffset[i+1]-TileOffset[i]. When there is no mask, they
should normally be equal (modulo the size taken by BLOCK_LEADER and
BLOCK_TRAILER). In the case where there is a mask and
MASK_INTERLEAVED_WITH_IMAGERY=YES, then the tile size indicated in the leader
will be &lt; TileOffset[i+1]-TileOffset[i] since the data for the mask will
follow the imagery data (see MASK_INTERLEAVED_WITH_IMAGERY=YES)</p>
<p>Each tile data is immediately followed by a trailer, consisting of the repetition
of the last 4 bytes of the payload of the tile data. The size of this trailer is
<em>not</em> included in the TileByteCounts[] array. The purpose of this trailer is forces
readers to be able to check if TIFF writers, not aware of those optimizations,
have modified the  TIFF file in a way that breaks the optimizations. If an optimized reader
detects an inconsistency, it can then fallbacks to the regular/slower method of using
TileOffsets[i] + TileByteCounts[i].</p>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdalwarp</span> <span class="n">src1</span><span class="o">.</span><span class="n">tif</span> <span class="n">src2</span><span class="o">.</span><span class="n">tif</span> <span class="n">out</span><span class="o">.</span><span class="n">tif</span> <span class="o">-</span><span class="n">of</span> <span class="n">COG</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gdal_translate</span> <span class="n">world</span><span class="o">.</span><span class="n">tif</span> <span class="n">world_webmerc_cog</span><span class="o">.</span><span class="n">tif</span> <span class="o">-</span><span class="n">of</span> <span class="n">COG</span> <span class="o">-</span><span class="n">co</span> <span class="n">TILING_SCHEME</span><span class="o">=</span><span class="n">GoogleMapsCompatible</span> <span class="o">-</span><span class="n">co</span> <span class="n">COMPRESS</span><span class="o">=</span><span class="n">JPEG</span>
</pre></div>
</div>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="gtiff.html#raster-gtiff"><span class="std std-ref">GTiff – GeoTIFF File Format</span></a> driver</p></li>
<li><p><a class="reference external" href="https://trac.osgeo.org/gdal/wiki/CloudOptimizedGeoTIFF">How to generate and read cloud optimized GeoTIFF
files</a> (before GDAL 3.1)</p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="cosar.html" class="btn btn-neutral float-right" title="COSAR – TerraSAR-X Complex SAR Data Product" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="coasp.html" class="btn btn-neutral float-left" title="COASP – DRDC COASP SAR Processor Raster" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2021 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>