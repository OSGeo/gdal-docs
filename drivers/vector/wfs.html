

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>WFS - OGC WFS service &mdash; GDAL  documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://gdal.orgdrivers/vector/wfs.html"/>
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/gdal.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="XLS - MS Excel format" href="xls.html" />
    <link rel="prev" title="WAsP - WAsP .map format" href="wasp.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/gdalicon.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programs/index.html">Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../raster/index.html">Raster drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Vector drivers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="aeronavfaa.html">Aeronav FAA</a></li>
<li class="toctree-l2"><a class="reference internal" href="amigocloud.html">AmigoCloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="ao.html">ESRI ArcObjects</a></li>
<li class="toctree-l2"><a class="reference internal" href="arcgen.html">ARCGEN - Arc/Info Generate</a></li>
<li class="toctree-l2"><a class="reference internal" href="avcbin.html">Arc/Info Binary Coverage</a></li>
<li class="toctree-l2"><a class="reference internal" href="avce00.html">Arc/Info E00 (ASCII) Coverage</a></li>
<li class="toctree-l2"><a class="reference internal" href="bna.html">BNA - Atlas BNA</a></li>
<li class="toctree-l2"><a class="reference internal" href="cad.html">CAD – AutoCAD DWG</a></li>
<li class="toctree-l2"><a class="reference internal" href="carto.html">Carto</a></li>
<li class="toctree-l2"><a class="reference internal" href="cloudant.html">Cloudant – Cloudant</a></li>
<li class="toctree-l2"><a class="reference internal" href="couchdb.html">CouchDB - CouchDB/GeoCouch</a></li>
<li class="toctree-l2"><a class="reference internal" href="csv.html">Comma Separated Value (.csv)</a></li>
<li class="toctree-l2"><a class="reference internal" href="csw.html">CSW - OGC CSW (Catalog Service for the Web)</a></li>
<li class="toctree-l2"><a class="reference internal" href="db2.html">DB2 Spatial</a></li>
<li class="toctree-l2"><a class="reference internal" href="dgn.html">Microstation DGN</a></li>
<li class="toctree-l2"><a class="reference internal" href="dgnv8.html">Microstation DGN v8</a></li>
<li class="toctree-l2"><a class="reference internal" href="dods.html">DODS/OPeNDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="dwg.html">AutoCAD DWG</a></li>
<li class="toctree-l2"><a class="reference internal" href="dxf.html">AutoCAD DXF</a></li>
<li class="toctree-l2"><a class="reference internal" href="eeda.html">Google Earth Engine Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="edigeo.html">EDIGEO</a></li>
<li class="toctree-l2"><a class="reference internal" href="elasticsearch.html">Elasticsearch: Geographically Encoded Objects for Elasticsearch</a></li>
<li class="toctree-l2"><a class="reference internal" href="esrijson.html">ESRIJSON / FeatureService driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="filegdb.html">ESRI File Geodatabase (FileGDB)</a></li>
<li class="toctree-l2"><a class="reference internal" href="flatgeobuf.html">FlatGeobuf</a></li>
<li class="toctree-l2"><a class="reference internal" href="fme.html">FMEObjects Gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="geoconcept.html">GeoConcept text export</a></li>
<li class="toctree-l2"><a class="reference internal" href="geojson.html">GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="geojsonseq.html">GeoJSONSeq: sequence of GeoJSON features</a></li>
<li class="toctree-l2"><a class="reference internal" href="geomedia.html">Geomedia MDB database</a></li>
<li class="toctree-l2"><a class="reference internal" href="georss.html">GeoRSS : Geographically Encoded Objects for RSS feeds</a></li>
<li class="toctree-l2"><a class="reference internal" href="gmlas.html">GMLAS - Geography Markup Language (GML) driven by application schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="gml.html">GML - Geography Markup Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="gmt.html">GMT ASCII Vectors (.gmt)</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpkg.html">GPKG – GeoPackage vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpsbabel.html">GPSBabel</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpx.html">GPX - GPS Exchange Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="grass.html">GRASS Vector Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="gtm.html">GTM - GPS TrackMaker</a></li>
<li class="toctree-l2"><a class="reference internal" href="htf.html">HTF - Hydrographic Transfer Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="idb.html">IDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="idrisi.html">Idrisi Vector (.VCT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ili.html">“INTERLIS 1” and “INTERLIS 2” drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="ingres.html">INGRES</a></li>
<li class="toctree-l2"><a class="reference internal" href="jml.html">JML: OpenJUMP JML format</a></li>
<li class="toctree-l2"><a class="reference internal" href="kml.html">KML - Keyhole Markup Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="libkml.html">LIBKML Driver (.kml .kmz)</a></li>
<li class="toctree-l2"><a class="reference internal" href="mapml.html">MapML</a></li>
<li class="toctree-l2"><a class="reference internal" href="mdb.html">Access MDB databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory.html">Memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="mitab.html">MapInfo TAB and MIF/MID</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodb.html">MongoDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodbv3.html">MongoDBv3</a></li>
<li class="toctree-l2"><a class="reference internal" href="mssqlspatial.html">MSSQLSpatial - Microsoft SQL Server Spatial Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="mvt.html">MVT: Mapbox Vector Tiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="mysql.html">MySQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="nas.html">NAS - ALKIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="netcdf.html">NetCDF: Network Common Data Form - Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="ngw.html">NGW – NextGIS Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="ntf.html">UK .NTF</a></li>
<li class="toctree-l2"><a class="reference internal" href="oapif.html">OGC API - Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="oci.html">Oracle Spatial</a></li>
<li class="toctree-l2"><a class="reference internal" href="odbc.html">ODBC RDBMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="ods.html">ODS - Open Document Spreadsheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="ogdi.html">OGDI Vectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="openair.html">OpenAir - OpenAir Special Use Airspace Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="openfilegdb.html">ESRI File Geodatabase (OpenFileGDB)</a></li>
<li class="toctree-l2"><a class="reference internal" href="osm.html">OSM - OpenStreetMap XML and PBF</a></li>
<li class="toctree-l2"><a class="reference internal" href="pdf.html">PDF – Geospatial PDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="pds.html">PDS - Planetary Data Systems TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="pgdump.html">PostgreSQL SQL Dump</a></li>
<li class="toctree-l2"><a class="reference internal" href="pgeo.html">ESRI Personal GeoDatabase</a></li>
<li class="toctree-l2"><a class="reference internal" href="pg.html">PostgreSQL / PostGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="plscenes.html">PLScenes (Planet Labs Scenes/Catalog API)</a></li>
<li class="toctree-l2"><a class="reference internal" href="s57.html">IHO S-57 (ENC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="sde.html">ESRI ArcSDE</a></li>
<li class="toctree-l2"><a class="reference internal" href="sdts.html">SDTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="segukooa.html">SEG-P1 / UKOOA P1/90</a></li>
<li class="toctree-l2"><a class="reference internal" href="segy.html">SEG-Y / SEGY</a></li>
<li class="toctree-l2"><a class="reference internal" href="selafin.html">Selafin files</a></li>
<li class="toctree-l2"><a class="reference internal" href="shapefile.html">ESRI Shapefile / DBF</a></li>
<li class="toctree-l2"><a class="reference internal" href="sosi.html">Norwegian SOSI Standard</a></li>
<li class="toctree-l2"><a class="reference internal" href="sqlite.html">SQLite / Spatialite RDBMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="sua.html">SUA - Tim Newport-Peace’s Special Use Airspace Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="svg.html">SVG - Scalable Vector Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="sxf.html">Storage and eXchange Format - SXF</a></li>
<li class="toctree-l2"><a class="reference internal" href="tiger.html">U.S. Census TIGER/Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="topojson.html">TopoJSON driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="vdv.html">VDV - VDV-451/VDV-452/INTREST Data Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="vfk.html">VFK - Czech Cadastral Exchange Data Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="vrt.html">VRT – Virtual Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="walk.html">Walk - Walk Spatial Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="wasp.html">WAsP - WAsP .map format</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">WFS - OGC WFS service</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#driver-capabilities">Driver capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dataset-name-syntax">Dataset name syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="#request-paging">Request paging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filtering">Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#layer-joins">Layer joins</a></li>
<li class="toctree-l3"><a class="reference internal" href="#write-support-wfs-t">Write support / WFS-T</a></li>
<li class="toctree-l3"><a class="reference internal" href="#write-support-and-ogr-transactions">Write support and OGR transactions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#special-sql-commands">Special SQL commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="#special-layer-wfslayermetadata">Special layer : WFSLayerMetadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#special-layer-wfsgetcapabilities">Special layer : WFSGetCapabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#open-options-gdal-2-0">Open options (GDAL &gt;= 2.0)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="xls.html">XLS - MS Excel format</a></li>
<li class="toctree-l2"><a class="reference internal" href="xlsx.html">XLSX - MS Office Open XML spreadsheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="xplane.html">X-Plane/Flightgear aeronautical data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">How to contribute?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GDAL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html"> GDAL  documentation </a> &raquo;</li>
      
          <li><a href="index.html">Vector drivers</a> &raquo;</li>
      
      <li>WFS - OGC WFS service</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit//master/gdal/doc/source/drivers/vector/wfs.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="xls.html" class="btn btn-neutral float-right" title="XLS - MS Excel format" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="wasp.html" class="btn btn-neutral float-left" title="WAsP - WAsP .map format" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="wfs-ogc-wfs-service">
<span id="vector-wfs"></span><h1>WFS - OGC WFS service<a class="headerlink" href="#wfs-ogc-wfs-service" title="Permalink to this headline">¶</a></h1>
<div class="admonition shortname" id="shortname-0">
<p class="admonition-title">Driver short name</p>
<p>WFS</p>
</div>
<div class="admonition build_dependencies" id="build_dependencies-0">
<p class="admonition-title">Build dependencies</p>
<p>libcurl</p>
</div>
<p>This driver can connect to a OGC WFS service. It supports WFS 1.0, 1.1
and 2.0 protocols. GDAL/OGR must be built with Curl support in order for
the WFS driver to be compiled. Usually WFS requests return results in
GML format, so the GML driver should generally be set-up for read
support (thus requiring GDAL/OGR to be built with Xerces or Expat
support). It is sometimes possible to use alternate underlying formats
when the server supports them (such as OUTPUTFORMAT=json).</p>
<p>The driver supports read-only services, as well as transactional ones
(WFS-T).</p>
<div class="section" id="driver-capabilities">
<h2>Driver capabilities<a class="headerlink" href="#driver-capabilities" title="Permalink to this headline">¶</a></h2>
<div class="admonition supports_georeferencing" id="supports_georeferencing-0">
<p class="admonition-title">Supports Georeferencing</p>
<p>This driver supports georeferencing</p>
</div>
</div>
<div class="section" id="dataset-name-syntax">
<h2>Dataset name syntax<a class="headerlink" href="#dataset-name-syntax" title="Permalink to this headline">¶</a></h2>
<p>The minimal syntax to open a WFS datasource is :
<em>WFS:http://path/to/WFS/service</em> or
<em>http://path/to/WFS/service?SERVICE=WFS</em></p>
<p>Additional optional parameters can be specified such as <em>TYPENAME</em>,
<em>VERSION</em>, <em>MAXFEATURES</em> as specified in WFS specification.</p>
<p>The name provided to the TYPENAME parameter must be exactly the layer
name reported by OGR, in particular with its namespace prefix when its
exists. Note: starting with GDAL 1.10, several type names can be
provided and separated by comma.</p>
<p>It is also possible to specify the name of an XML file whose content
matches the following syntax (the &lt;OGRWFSDataSource&gt; element must be the
first bytes of the file):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;OGRWFSDataSource&gt;
    &lt;URL&gt;http://path/to/WFS/service[?OPTIONAL_PARAMETER1=VALUE[&amp;amp;OPTIONAL_PARAMETER2=VALUE]]&lt;/URL&gt;
&lt;/OGRWFSDataSource&gt;
</pre></div>
</div>
<p>Note: the URL must be XML-escaped, for example the <em>&amp;</em> character must be
written as <em>&amp;amp;</em></p>
<p>At the first opening, the content of the result of the <em>GetCapabilities</em>
request will be appended to the file, so that it can be cached for later
openings of the dataset. The same applies for the <em>DescribeFeatureType</em>
request issued to discover the field definition of each layer.</p>
<p>The service description file has the following additional elements as
immediate children of the <code class="docutils literal notranslate"><span class="pre">OGRWFSDataSource</span></code> element that may be
optionally set.</p>
<ul class="simple">
<li><p><strong>Timeout</strong>: The timeout to use for remote service requests. If not
provided, the libcurl default is used.</p></li>
<li><p><strong>UserPwd</strong>: May be supplied with <em>userid:password</em> to pass a userid
and password to the remote server.</p></li>
<li><p><strong>HttpAuth</strong>: May be BASIC, NTLM or ANY to control the authentication
scheme to be used.</p></li>
<li><p><strong>Version</strong>: Set a specific WFS version to use (either 1.0.0 or
1.1.0).</p></li>
<li><p><strong>PagingAllowed</strong>: Set to ON if paging must be enabled. See “Request
paging” section.</p></li>
<li><p><strong>PageSize</strong>: Page size when paging is enabled. See “Request paging”
section.</p></li>
<li><p><strong>BaseStartIndex</strong>: (OGR &gt;= 1.10) Base of the start index when paging
is enabled (0 or 1). See “Request paging” section.</p></li>
<li><p><strong>COOKIE</strong>: HTTP cookies that are passed in HTTP requests, formatted
as COOKIE1=VALUE1; COOKIE2=VALUE2</p></li>
</ul>
</div>
<div class="section" id="request-paging">
<h2>Request paging<a class="headerlink" href="#request-paging" title="Permalink to this headline">¶</a></h2>
<p>Before OGR 1.10, when reading the first feature from a layer, the whole
layer content will be fetched from the server.</p>
<div class="line-block">
<div class="line">Some servers (such as MapServer &gt;= 6.0) support the use of STARTINDEX
that allows to do the requests per “page”, and thus to avoid
downloading the whole content of the layer in a single request. Paging
was introduced in WFS 2.0.0 but servers may support it as an vendor
specific option also with WFS 1.0.0 and 1.1.0. The OGR WFS client will
use paging when the OGR_WFS_PAGING_ALLOWED configuration option is set
to ON. The page size (number of features fetched in a single request)
is limited to 100 by default. It can be changed by setting the
OGR_WFS_PAGE_SIZE configuration option.</div>
<div class="line">WFS 2.0.2 specification has clarified that the first feature in paging
is at index 0. But some server implementations of WFS paging have
considered that it was at index 1 (including MapServer &lt;= 6.2).
Starting with OGR 1.10, the default base start index is 0, as mandated
by the specification. The OGR_WFS_BASE_START_INDEX configuration
option can however be set to 1 to be compatible with the server
implementations that considered the first feature to be at index 1.</div>
<div class="line">Those 3 options (OGR_WFS_PAGING_ALLOWED, OGR_WFS_PAGE_SIZE,
OGR_WFS_BASE_START_INDEX) can also be set in a WFS XML description
file with the elements of similar names (PagingAllowed, PageSize,
BaseStartIndex).</div>
</div>
<p>Starting with OGR 1.10, the WFS driver will read the GML content as a
stream instead as a whole file, which will improve interactivity and
help when the content cannot fit into memory. This can be turned off by
setting the OGR_WFS_USE_STREAMING configuration option to NO if this is
not desirable (for example, when iterating several times on a layer that
can fit into memory). When streaming is enabled, GZip compression is
also requested. It has been observed that some WFS servers, that cannot
do on-the-fly compression, will cache on their side the whole content to
be sent before sending the first bytes on the wire. To avoid this, you
can set the CPL_CURL_GZIP configuration option to NO.</p>
<p>Starting with GDAL 2.0, the WFS driver will automatically detect if
server supports paging, when requesting a WFS 2.0 server.</p>
</div>
<div class="section" id="filtering">
<h2>Filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a></h2>
<p>The driver will forward any spatial filter set with SetSpatialFilter()
to the server. It also makes its best effort to do the same for
attribute filters set with SetAttributeFilter() when possible (turning
OGR SQL language into OGC filter description). When this is not
possible, it will default to client-side only filtering, which can be a
slow operation because involving fetching all the features from the
servers.</p>
<p>Starting with GDAL 2.0, the following spatial functions can be used :</p>
<ul class="simple">
<li><p>the 8 spatial binary predicate: <strong>ST_Equals, ST_Disjoint, ST_Touches,
ST_Contains, ST_Intersects, ST_Within, ST_Crosses and ST_Overlaps</strong>
that take 2 geometry arguments. Typically the geometry column name,
and a constant geometry such as built with ST_MakeEnvelope or
ST_GeomFromText.</p></li>
<li><p><strong>ST_DWithin(geom1,geom2,distance_in_meters)</strong></p></li>
<li><p><strong>ST_Beyond(geom1,geom2,distance_in_meters)</strong></p></li>
<li><p><strong>ST_MakeEnvelope(xmin,ymin,xmax,ymax[,srs])</strong>: to build an envelope.
srs can be an integer (an EPSG code), or a string directly set as the
srsName attribute of the gml:Envelope. GDAL will take care of needed
axis swapping, so coordinates should be expressed in the “natural GIS
order” (for example long,lat for geodetic systems)</p></li>
<li><p><strong>ST_GeomFromText(wkt,[srs])</strong>: to build a geometry from its WKT
representation.</p></li>
</ul>
<p>Note that those spatial functions are only supported as server-side
filters.</p>
</div>
<div class="section" id="layer-joins">
<h2>Layer joins<a class="headerlink" href="#layer-joins" title="Permalink to this headline">¶</a></h2>
<p>Starting with GDAL 2.0, and for WFS 2.0 servers that support joins,
SELECT statements that involve joins will be run on server side. Spatial
joins can also be done by using the above mentioned spatial functions,
if the server supports spatial joins.</p>
<p>There might be restrictions set by server on the complexity of the
joins. The OGR WFS driver also restricts column selection to be column
names, potentially with aliases and type casts, but not expressions. The
ON and WHERE clauses must also be evaluated on server side, so no OGR
special fields are allowed for example. ORDER BY clauses are supported,
but the fields must belong to the primary table.</p>
<p>Example of valid statement :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="n">t1</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">t1</span><span class="o">.</span><span class="n">val1</span><span class="p">,</span> <span class="n">t1</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">t2</span><span class="o">.</span><span class="n">val1</span> <span class="n">FROM</span> <span class="n">my_table</span> <span class="n">AS</span> <span class="n">t1</span> <span class="n">JOIN</span> <span class="n">another_table</span> <span class="n">AS</span> <span class="n">t2</span> <span class="n">ON</span> <span class="n">t1</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">t2</span><span class="o">.</span><span class="n">t1id</span>
</pre></div>
</div>
<p>or</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">SELECT</span> <span class="o">*</span> <span class="n">FROM</span> <span class="n">my_table</span> <span class="n">AS</span> <span class="n">t1</span> <span class="n">JOIN</span> <span class="n">another_table</span> <span class="n">AS</span> <span class="n">t2</span> <span class="n">ON</span> <span class="n">ST_Intersects</span><span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">geom</span><span class="p">,</span> <span class="n">t2</span><span class="o">.</span><span class="n">geom</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="write-support-wfs-t">
<h2>Write support / WFS-T<a class="headerlink" href="#write-support-wfs-t" title="Permalink to this headline">¶</a></h2>
<p>The WFS-T protocol only enables the user to operate at feature level. No
datasource, layer or field creations are possible.</p>
<p>Write support is only enabled when the datasource is opened in update
mode.</p>
<p>The mapping between the operations of the WFS Transaction service and
the OGR concepts is the following:</p>
<ul class="simple">
<li><p>OGRFeature::CreateFeature() &lt;==&gt; WFS insert operation</p></li>
<li><p>OGRFeature::SetFeature() &lt;==&gt; WFS update operation</p></li>
<li><p>OGRFeature::DeleteFeature() &lt;==&gt; WFS delete operation</p></li>
</ul>
<p>Lock operations (LockFeature service) are not available at that time.</p>
<p>There are a few caveats to keep in mind. OGR feature ID (FID) is an
integer based value, whereas WFS/GML gml:id attribute is a string. Thus
it is not always possible to match both values. The WFS driver exposes
then the gml:id attribute of a feature as a ‘gml_id’ field.</p>
<p>When inserting a new feature with CreateFeature(), and if the command is
successful, OGR will fetch the returned gml:id and set the ‘gml_id’
field of the feature accordingly. It will also try to set the OGR FID if
the gml:id is of the form layer_name.numeric_value. Otherwise the FID
will be left to its unset default value.</p>
<p>When updating an existing feature with SetFeature(), the OGR FID field
will be ignored. The request issued to the driver will only take into
account the value of the gml:id field of the feature. The same applies
for DeleteFeature().</p>
</div>
<div class="section" id="write-support-and-ogr-transactions">
<h2>Write support and OGR transactions<a class="headerlink" href="#write-support-and-ogr-transactions" title="Permalink to this headline">¶</a></h2>
<p>The above operations are by default issued to the server synchronously
with the OGR API call. This however can cause performance penalties when
issuing a lot of commands due to many client/server exchanges.</p>
<p>It is possible to surround those operations between
OGRLayer::StartTransaction() and OGRLayer::CommitTransaction(). The
operations will be stored into memory and only executed at the time
CommitTransaction() is called.</p>
<p>The drawback for CreateFeature() is that the user cannot know which
gml:id have been assigned to the inserted features. A special SQL
statement has been introduced into the WFS driver to workaround this :
by issuing the “SELECT _LAST_INSERTED_FIDS_ FROM layer_name” (where
layer_name is to be replaced with the actual layer_name) command through
the OGRDataSource::ExecuteSQL(), a layer will be returned with as many
rows with a single attribute gml_id as the count of inserted features
during the last committed transaction.</p>
<p>Note : currently, only CreateFeature() makes use of OGR transaction
mechanism. SetFeature() and DeleteFeature() will still be issued
immediately.</p>
</div>
<div class="section" id="special-sql-commands">
<h2>Special SQL commands<a class="headerlink" href="#special-sql-commands" title="Permalink to this headline">¶</a></h2>
<p>The following SQL / pseudo-SQL commands passed to
OGRDataSource::ExecuteSQL() are specific of the WFS driver :</p>
<ul class="simple">
<li><p>“DELETE FROM layer_name WHERE expression” : this will result into a
WFS delete operation. This can be a fast way of deleting one or
several features. In particularly, this can be a faster replacement
for OGRLayer::DeleteFeature() when the gml:id is known, but the
feature has not been fetched from the server.</p></li>
<li><p>“SELECT _LAST_INSERTED_FIDS_ FROM layer_name” : see above
paragraph.</p></li>
</ul>
<p>Currently, any other SQL command will be processed by the generic layer,
meaning client-side only processing. Server side spatial and attribute
filtering must be done through the SetSpatialFilter() and
SetAttributeFilter() interfaces.</p>
</div>
<div class="section" id="special-layer-wfslayermetadata">
<h2>Special layer : WFSLayerMetadata<a class="headerlink" href="#special-layer-wfslayermetadata" title="Permalink to this headline">¶</a></h2>
<p>(OGR &gt;= 1.9.0)</p>
<p>A “hidden” layer called “WFSLayerMetadata” is filled with records with
metadata for each WFS layer.</p>
<p>Each record contains a “layer_name”, “title” and “abstract” field, from
the document returned by GetCapabilities.</p>
<p>That layer is returned through GetLayerByName(“WFSLayerMetadata”).</p>
</div>
<div class="section" id="special-layer-wfsgetcapabilities">
<h2>Special layer : WFSGetCapabilities<a class="headerlink" href="#special-layer-wfsgetcapabilities" title="Permalink to this headline">¶</a></h2>
<p>(OGR &gt;= 1.9.0)</p>
<p>A “hidden” layer called “WFSGetCapabilities” is filled with the raw XML
result of the GetCapabilities request.</p>
<p>That layer is returned through GetLayerByName(“WFSGetCapabilities”).</p>
</div>
<div class="section" id="open-options-gdal-2-0">
<h2>Open options (GDAL &gt;= 2.0)<a class="headerlink" href="#open-options-gdal-2-0" title="Permalink to this headline">¶</a></h2>
<p>The following options are available:</p>
<ul class="simple">
<li><p><strong>URL</strong>=url: URL to the WFS server endpoint. Required when using
the “WFS:” string as the connection string.</p></li>
<li><p><strong>TRUST_CAPABILITIES_BOUNDS</strong>=YES/NO: Whether to trust layer bounds
declared in GetCapabilities response, for faster GetExtent() runtime.
Defaults to NO</p></li>
<li><p><strong>EMPTY_AS_NULL=YES/NO</strong>: (GDAL &gt;=2.0) By default
(EMPTY_AS_NULL=YES), fields with empty content will be reported as
being NULL, instead of being an empty string. This is the historic
behavior. However this will prevent such fields to be declared as
not-nullable if the application schema declared them as mandatory. So
this option can be set to NO to have both empty strings being report
as such, and mandatory fields being reported as not nullable.</p></li>
<li><p><strong>INVERT_AXIS_ORDER_IF_LAT_LONG=YES/NO</strong>: (GDAL &gt;=2.0) Whether to
present SRS and coordinate ordering in traditional GIS order.
Defaults to YES.</p></li>
<li><p><strong>CONSIDER_EPSG_AS_URN=YES/NO/AUTO</strong>: (GDAL &gt;=2.0) Whether to
consider srsName like EPSG:XXXX as respecting EPSG axis order.
Defaults to AUTO.</p></li>
<li><p><strong>EXPOSE_GML_ID=YES/NO</strong>: (GDAL &gt;=2.0) Whether to expose the gml:id
attribute of a GML feature as the gml_id OGR field. Note that hiding
gml_id will prevent WFS-T from working. Defaults to YES.</p></li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Listing the types of a WFS server :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="o">-</span><span class="n">ro</span> <span class="n">WFS</span><span class="p">:</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www2</span><span class="o">.</span><span class="n">dmsolutions</span><span class="o">.</span><span class="n">ca</span><span class="o">/</span><span class="n">cgi</span><span class="o">-</span><span class="nb">bin</span><span class="o">/</span><span class="n">mswfs_gmap</span>
</pre></div>
</div>
<p>Listing the types of a WFS server whose layer structures are cached in a
XML file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="o">-</span><span class="n">ro</span> <span class="n">mswfs_gmap</span><span class="o">.</span><span class="n">xml</span>
</pre></div>
</div>
<p>Listing the features of the popplace layer, with a spatial filter :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="o">-</span><span class="n">ro</span> <span class="n">WFS</span><span class="p">:</span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www2</span><span class="o">.</span><span class="n">dmsolutions</span><span class="o">.</span><span class="n">ca</span><span class="o">/</span><span class="n">cgi</span><span class="o">-</span><span class="nb">bin</span><span class="o">/</span><span class="n">mswfs_gmap</span> <span class="n">popplace</span> <span class="o">-</span><span class="n">spat</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mf">2961766.250000</span> <span class="mf">3798856.750000</span>
</pre></div>
</div>
<p>Retrieving the features of gml:id “world.2” and “world.3” from the
tows:world layer :</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="s2">&quot;WFS:http://www.tinyows.org/cgi-bin/tinyows&quot;</span> <span class="n">tows</span><span class="p">:</span><span class="n">world</span> <span class="o">-</span><span class="n">ro</span> <span class="o">-</span><span class="n">al</span> <span class="o">-</span><span class="n">where</span> <span class="s2">&quot;gml_id=&#39;world.2&#39; or gml_id=&#39;world.3&#39;&quot;</span>
</pre></div>
</div>
<p>Display layer metadata (OGR &gt;= 1.9.0):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="o">-</span><span class="n">ro</span> <span class="o">-</span><span class="n">al</span> <span class="s2">&quot;WFS:http://v2.suite.opengeo.org/geoserver/ows&quot;</span> <span class="n">WFSLayerMetadata</span>
</pre></div>
</div>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://www.opengeospatial.org/standards/wfs">OGC WFS Standard</a></p></li>
<li><p><a class="reference internal" href="gml.html#vector-gml"><span class="std std-ref">GML driver documentation</span></a></p></li>
<li><p><a class="reference internal" href="oapif.html#vector-oapif"><span class="std std-ref">OGC API - Features driver documentation</span></a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="xls.html" class="btn btn-neutral float-right" title="XLS - MS Excel format" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="wasp.html" class="btn btn-neutral float-left" title="WAsP - WAsP .map format" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2020 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>