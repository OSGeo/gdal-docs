

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PostgreSQL / PostGIS &mdash; GDAL  documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://gdal.orgdrivers/vector/pg.html"/>
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/gdal.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="PostgreSQL / PostGIS - Advanced Driver Information" href="pg_advanced.html" />
    <link rel="prev" title="ESRI Personal GeoDatabase" href="pgeo.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/gdalicon.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programs/index.html">Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../raster/index.html">Raster drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Vector drivers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="aeronavfaa.html">Aeronav FAA</a></li>
<li class="toctree-l2"><a class="reference internal" href="amigocloud.html">AmigoCloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="ao.html">ESRI ArcObjects</a></li>
<li class="toctree-l2"><a class="reference internal" href="arcgen.html">ARCGEN - Arc/Info Generate</a></li>
<li class="toctree-l2"><a class="reference internal" href="avcbin.html">Arc/Info Binary Coverage</a></li>
<li class="toctree-l2"><a class="reference internal" href="avce00.html">Arc/Info E00 (ASCII) Coverage</a></li>
<li class="toctree-l2"><a class="reference internal" href="bna.html">BNA - Atlas BNA</a></li>
<li class="toctree-l2"><a class="reference internal" href="cad.html">CAD – AutoCAD DWG</a></li>
<li class="toctree-l2"><a class="reference internal" href="carto.html">Carto</a></li>
<li class="toctree-l2"><a class="reference internal" href="cloudant.html">Cloudant – Cloudant</a></li>
<li class="toctree-l2"><a class="reference internal" href="couchdb.html">CouchDB - CouchDB/GeoCouch</a></li>
<li class="toctree-l2"><a class="reference internal" href="csv.html">Comma Separated Value (.csv)</a></li>
<li class="toctree-l2"><a class="reference internal" href="csw.html">CSW - OGC CSW (Catalog Service for the Web)</a></li>
<li class="toctree-l2"><a class="reference internal" href="db2.html">DB2 Spatial</a></li>
<li class="toctree-l2"><a class="reference internal" href="dgn.html">Microstation DGN</a></li>
<li class="toctree-l2"><a class="reference internal" href="dgnv8.html">Microstation DGN v8</a></li>
<li class="toctree-l2"><a class="reference internal" href="dods.html">DODS/OPeNDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="dwg.html">AutoCAD DWG</a></li>
<li class="toctree-l2"><a class="reference internal" href="dxf.html">AutoCAD DXF</a></li>
<li class="toctree-l2"><a class="reference internal" href="eeda.html">Google Earth Engine Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="edigeo.html">EDIGEO</a></li>
<li class="toctree-l2"><a class="reference internal" href="elasticsearch.html">Elasticsearch: Geographically Encoded Objects for Elasticsearch</a></li>
<li class="toctree-l2"><a class="reference internal" href="esrijson.html">ESRIJSON / FeatureService driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="filegdb.html">ESRI File Geodatabase (FileGDB)</a></li>
<li class="toctree-l2"><a class="reference internal" href="flatgeobuf.html">FlatGeobuf</a></li>
<li class="toctree-l2"><a class="reference internal" href="fme.html">FMEObjects Gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="geoconcept.html">GeoConcept text export</a></li>
<li class="toctree-l2"><a class="reference internal" href="geojson.html">GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="geojsonseq.html">GeoJSONSeq: sequence of GeoJSON features</a></li>
<li class="toctree-l2"><a class="reference internal" href="geomedia.html">Geomedia MDB database</a></li>
<li class="toctree-l2"><a class="reference internal" href="georss.html">GeoRSS : Geographically Encoded Objects for RSS feeds</a></li>
<li class="toctree-l2"><a class="reference internal" href="gmlas.html">GMLAS - Geography Markup Language (GML) driven by application schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="gml.html">GML - Geography Markup Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="gmt.html">GMT ASCII Vectors (.gmt)</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpkg.html">GPKG – GeoPackage vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpsbabel.html">GPSBabel</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpx.html">GPX - GPS Exchange Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="grass.html">GRASS Vector Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="gtm.html">GTM - GPS TrackMaker</a></li>
<li class="toctree-l2"><a class="reference internal" href="htf.html">HTF - Hydrographic Transfer Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="idb.html">IDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="idrisi.html">Idrisi Vector (.VCT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ili.html">“INTERLIS 1” and “INTERLIS 2” drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="ingres.html">INGRES</a></li>
<li class="toctree-l2"><a class="reference internal" href="jml.html">JML: OpenJUMP JML format</a></li>
<li class="toctree-l2"><a class="reference internal" href="kml.html">KML - Keyhole Markup Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="libkml.html">LIBKML Driver (.kml .kmz)</a></li>
<li class="toctree-l2"><a class="reference internal" href="mapml.html">MapML</a></li>
<li class="toctree-l2"><a class="reference internal" href="mdb.html">Access MDB databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory.html">Memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="mitab.html">MapInfo TAB and MIF/MID</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodb.html">MongoDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="mongodbv3.html">MongoDBv3</a></li>
<li class="toctree-l2"><a class="reference internal" href="mssqlspatial.html">MSSQLSpatial - Microsoft SQL Server Spatial Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="mvt.html">MVT: Mapbox Vector Tiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="mysql.html">MySQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="nas.html">NAS - ALKIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="netcdf.html">NetCDF: Network Common Data Form - Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="ngw.html">NGW – NextGIS Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="ntf.html">UK .NTF</a></li>
<li class="toctree-l2"><a class="reference internal" href="oapif.html">OGC API - Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="oci.html">Oracle Spatial</a></li>
<li class="toctree-l2"><a class="reference internal" href="odbc.html">ODBC RDBMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="ods.html">ODS - Open Document Spreadsheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="ogdi.html">OGDI Vectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="openair.html">OpenAir - OpenAir Special Use Airspace Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="openfilegdb.html">ESRI File Geodatabase (OpenFileGDB)</a></li>
<li class="toctree-l2"><a class="reference internal" href="osm.html">OSM - OpenStreetMap XML and PBF</a></li>
<li class="toctree-l2"><a class="reference internal" href="pdf.html">PDF – Geospatial PDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="pds.html">PDS - Planetary Data Systems TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="pgdump.html">PostgreSQL SQL Dump</a></li>
<li class="toctree-l2"><a class="reference internal" href="pgeo.html">ESRI Personal GeoDatabase</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">PostgreSQL / PostGIS</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#driver-capabilities">Driver capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connecting-to-a-database">Connecting to a database</a></li>
<li class="toctree-l3"><a class="reference internal" href="#geometry-columns">Geometry columns</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sql-statements">SQL statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#creation-issues">Creation Issues</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#dataset-open-options">Dataset open options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dataset-creation-options">Dataset Creation Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#layer-creation-options">Layer Creation Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration-options">Configuration Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#faqs">FAQs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#see-also">See Also</a><ul>
<li class="toctree-l4"><a class="reference internal" href="pg_advanced.html">PostgreSQL / PostGIS - Advanced Driver Information</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="plscenes.html">PLScenes (Planet Labs Scenes/Catalog API)</a></li>
<li class="toctree-l2"><a class="reference internal" href="s57.html">IHO S-57 (ENC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="sde.html">ESRI ArcSDE</a></li>
<li class="toctree-l2"><a class="reference internal" href="sdts.html">SDTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="segukooa.html">SEG-P1 / UKOOA P1/90</a></li>
<li class="toctree-l2"><a class="reference internal" href="segy.html">SEG-Y / SEGY</a></li>
<li class="toctree-l2"><a class="reference internal" href="selafin.html">Selafin files</a></li>
<li class="toctree-l2"><a class="reference internal" href="shapefile.html">ESRI Shapefile / DBF</a></li>
<li class="toctree-l2"><a class="reference internal" href="sosi.html">Norwegian SOSI Standard</a></li>
<li class="toctree-l2"><a class="reference internal" href="sqlite.html">SQLite / Spatialite RDBMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="sua.html">SUA - Tim Newport-Peace’s Special Use Airspace Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="svg.html">SVG - Scalable Vector Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="sxf.html">Storage and eXchange Format - SXF</a></li>
<li class="toctree-l2"><a class="reference internal" href="tiger.html">U.S. Census TIGER/Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="topojson.html">TopoJSON driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="vdv.html">VDV - VDV-451/VDV-452/INTREST Data Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="vfk.html">VFK - Czech Cadastral Exchange Data Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="vrt.html">VRT – Virtual Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="walk.html">Walk - Walk Spatial Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="wasp.html">WAsP - WAsP .map format</a></li>
<li class="toctree-l2"><a class="reference internal" href="wfs.html">WFS - OGC WFS service</a></li>
<li class="toctree-l2"><a class="reference internal" href="xls.html">XLS - MS Excel format</a></li>
<li class="toctree-l2"><a class="reference internal" href="xlsx.html">XLSX - MS Office Open XML spreadsheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="xplane.html">X-Plane/Flightgear aeronautical data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">How to contribute?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GDAL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html"> GDAL  documentation </a> &raquo;</li>
      
          <li><a href="index.html">Vector drivers</a> &raquo;</li>
      
      <li>PostgreSQL / PostGIS</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit//master/gdal/doc/source/drivers/vector/pg.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="pg_advanced.html" class="btn btn-neutral float-right" title="PostgreSQL / PostGIS - Advanced Driver Information" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pgeo.html" class="btn btn-neutral float-left" title="ESRI Personal GeoDatabase" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="postgresql-postgis">
<span id="vector-pg"></span><h1>PostgreSQL / PostGIS<a class="headerlink" href="#postgresql-postgis" title="Permalink to this headline">¶</a></h1>
<div class="admonition shortname" id="shortname-0">
<p class="admonition-title">Driver short name</p>
<p>PostgreSQL</p>
</div>
<div class="admonition build_dependencies" id="build_dependencies-0">
<p class="admonition-title">Build dependencies</p>
<p>PostgreSQL client library (libpq)</p>
</div>
<p>This driver implements support for access to spatial tables in
PostgreSQL extended with the <a class="reference external" href="http://postgis.net/">PostGIS</a> spatial
data support. Some support exists in the driver for use with PostgreSQL
without PostGIS but with less functionalities.</p>
<p>This driver requires a connection to a Postgres database. If you want to
prepare a SQL dump to inject it later into a Postgres database, you can
instead use the <a class="reference internal" href="pgdump.html#vector-pgdump"><span class="std std-ref">PostgreSQL SQL Dump driver</span></a>.</p>
<p>You can find additional information on the driver in the <a class="reference internal" href="pg_advanced.html#vector-pg-advanced"><span class="std std-ref">Advanced OGR
PostgreSQL driver Information</span></a> page.</p>
<div class="section" id="driver-capabilities">
<h2>Driver capabilities<a class="headerlink" href="#driver-capabilities" title="Permalink to this headline">¶</a></h2>
<div class="admonition supports_create" id="supports_create-0">
<p class="admonition-title">Supports Create()</p>
<p>This driver supports the <a class="reference internal" href="../../api/gdaldriver_cpp.html#_CPPv4N10GDALDriver6CreateEPKciii12GDALDataTypePPc" title="GDALDriver::Create"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALDriver::Create()</span></code></a> operation</p>
</div>
<div class="admonition supports_georeferencing" id="supports_georeferencing-0">
<p class="admonition-title">Supports Georeferencing</p>
<p>This driver supports georeferencing</p>
</div>
</div>
<div class="section" id="connecting-to-a-database">
<h2>Connecting to a database<a class="headerlink" href="#connecting-to-a-database" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">To connect to a Postgres datasource, use a connection string
specifying the database name, with additional parameters as necessary</div>
</div>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PG</span><span class="p">:</span><span class="n">dbname</span><span class="o">=</span><span class="n">databasename</span>
</pre></div>
</div>
<p><em>or</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PG</span><span class="p">:</span><span class="s2">&quot;dbname=&#39;databasename&#39; host=&#39;addr&#39; port=&#39;5432&#39; user=&#39;x&#39; password=&#39;y&#39;&quot;</span>
</pre></div>
</div>
<p><em>or</em> starting with GDAL 3.1:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">PG</span><span class="p">:</span><span class="n">service</span><span class="o">=</span><span class="n">servicename</span>
</pre></div>
</div>
</div></blockquote>
<div class="line-block">
<div class="line">It’s also possible to omit the database name and connect to a
<em>default</em> database, with the same name as the user name.</div>
<div class="line"><strong>Note</strong>: We use PQconnectdb() to make the connection, so any other
options and defaults that would apply to it, apply to the name here
(refer to the documentation of the PostgreSQL server. Here for
<a class="reference external" href="http://www.postgresql.org/docs/8.4/interactive/libpq-connect.html">PostgreSQL
8.4</a>).
The PG: prefix is used to mark the name as a postgres connection
string.</div>
</div>
</div>
<div class="section" id="geometry-columns">
<h2>Geometry columns<a class="headerlink" href="#geometry-columns" title="Permalink to this headline">¶</a></h2>
<p>If the <em>geometry_columns</em> table exists (i.e. PostGIS is enabled for the
accessed database), then all tables and named views listed in the
<em>geometry_columns</em> table will be treated as OGR layers. Otherwise
(PostGIS disabled for the accessed database), all regular user tables
and named views will be treated as layers.</p>
<p>Starting with GDAL 1.7.0, the driver also supports the
<a class="reference external" href="http://postgis.net/docs/manual-1.5/ch04.html#PostGIS_Geography">geography</a>
column type introduced in PostGIS 1.5.</p>
<p>Starting with GDAL 2.0, the driver also supports reading and writing the
following non-linear geometry types :CIRCULARSTRING, COMPOUNDCURVE,
CURVEPOLYGON, MULTICURVE and MULTISURFACE</p>
</div>
<div class="section" id="sql-statements">
<h2>SQL statements<a class="headerlink" href="#sql-statements" title="Permalink to this headline">¶</a></h2>
<p>The PostgreSQL driver passes SQL statements directly to PostgreSQL by
default, rather than evaluating them internally when using the
ExecuteSQL() call on the OGRDataSource, or the -sql command option to
ogr2ogr. Attribute query expressions are also passed directly through to
PostgreSQL. It’s also possible to request the ogr Pg driver to handle
SQL commands with the <a class="reference internal" href="../../user/ogr_sql_dialect.html#ogr-sql-dialect"><span class="std std-ref">OGR SQL</span></a> engine, by
passing <strong>“OGRSQL”</strong> string to the ExecuteSQL() method, as the name of
the SQL dialect.</p>
<p>The PostgreSQL driver in OGR supports the
OGRDataSource::StartTransaction(), OGRDataSource::CommitTransaction()
and OGRDataSource::RollbackTransaction() calls in the normal SQL sense.</p>
</div>
<div class="section" id="creation-issues">
<h2>Creation Issues<a class="headerlink" href="#creation-issues" title="Permalink to this headline">¶</a></h2>
<p>The PostgreSQL driver does not support creation of new datasets (a
database within PostgreSQL), but it does allow creation of new layers
within an existing database.</p>
<p>As mentioned above the type system is impoverished, and many OGR types
are not appropriately mapped into PostgreSQL.</p>
<p>If the database has PostGIS types loaded (i.e. the geometry type), newly
created layers will be created with the PostGIS Geometry type. Otherwise
they will use OID.</p>
<p>By default it is assumed that text being sent to Postgres is in the
UTF-8 encoding. This is fine for plain ASCII, but can result in errors
for extended characters (ASCII 155+, LATIN1, etc). While OGR provides no
direct control over this, you can set the PGCLIENTENCODING environment
variable to indicate the format being provided. For instance, if your
text is LATIN1 you could set the environment variable to LATIN1 before
using OGR and input would be assumed to be LATIN1 instead of UTF-8. An
alternate way of setting the client encoding is to issue the following
SQL command with ExecuteSQL() : “SET client_encoding TO encoding_name”
where encoding_name is LATIN1, etc. Errors can be caught by enclosing
this command with a CPLPushErrorHandler()/CPLPopErrorHandler() pair.</p>
<div class="section" id="dataset-open-options">
<h3>Dataset open options<a class="headerlink" href="#dataset-open-options" title="Permalink to this headline">¶</a></h3>
<p>(GDAL &gt;= 2.0)</p>
<ul class="simple">
<li><p><strong>DBNAME</strong>=string: Database name.</p></li>
<li><p><strong>PORT</strong>=integer: Port.</p></li>
<li><p><strong>USER</strong>=string: User name.</p></li>
<li><p><strong>PASSWORD</strong>=string: Password.</p></li>
<li><p><strong>HOST</strong>=string: Server hostname.</p></li>
<li><p><strong>DBNAME</strong>=string: Database name.</p></li>
<li><p><strong>SERVICE</strong>=string: Service name (GDAL &gt;= 3.1)</p></li>
<li><p><strong>ACTIVE_SCHEMA</strong>=string: Active schema.</p></li>
<li><p><strong>SCHEMAS</strong>=string: Restricted sets of schemas to explore (comma
separated).</p></li>
<li><p><strong>TABLES</strong>=string: Restricted set of tables to list (comma
separated).</p></li>
<li><p><strong>LIST_ALL_TABLES</strong>=YES/NO: This may be “YES” to force all tables,
including non-spatial ones, to be listed.</p></li>
<li><p><strong>PRELUDE_STATEMENTS</strong>=string (GDAL &gt;= 2.1). SQL statement(s) to
send on the PostgreSQL client connection before any other ones. In
case of several statement, they must be separated with the
semi-column (;) sign. The driver will specifically recognize BEGIN as
the first statement to avoid emitting BEGIN/COMMIT itself. This
option may be useful when using the driver with pg_bouncer in
transaction pooling, e.g. ‘BEGIN; SET LOCAL statement_timeout TO
“1h”;’</p></li>
<li><p><strong>CLOSING_STATEMENTS</strong>=string (GDAL &gt;= 2.1). SQL statement(s) to
send on the PostgreSQL client connection after any other ones. In
case of several statement, they must be separated with the
semi-column (;) sign. With the above example value for
PRELUDE_STATEMENTS, the appropriate CLOSING_STATEMENTS would be
“COMMIT”.</p></li>
</ul>
</div>
<div class="section" id="dataset-creation-options">
<h3>Dataset Creation Options<a class="headerlink" href="#dataset-creation-options" title="Permalink to this headline">¶</a></h3>
<p>None</p>
</div>
<div class="section" id="layer-creation-options">
<h3>Layer Creation Options<a class="headerlink" href="#layer-creation-options" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>GEOM_TYPE</strong>: The GEOM_TYPE layer creation option can be set to one
of “geometry”, “geography” (PostGIS &gt;= 1.5), “BYTEA” or “OID” to
force the type of geometry used for a table. For a PostGIS database,
“geometry” is the default value.</p></li>
<li><p><strong>OVERWRITE</strong>: This may be “YES” to force an existing layer of the
desired name to be destroyed before creating the requested layer.</p></li>
<li><p><strong>LAUNDER</strong>: This may be “YES” to force new fields created on this
layer to have their field names “laundered” into a form more
compatible with PostgreSQL. This converts to lower case and converts
some special characters like “-” and “#” to “_”. If “NO” exact names
are preserved. The default value is “YES”. If enabled the table
(layer) name will also be laundered.</p></li>
<li><p><strong>PRECISION</strong>: This may be “YES” to force new fields created on this
layer to try and represent the width and precision information, if
available using NUMERIC(width,precision) or CHAR(width) types. If
“NO” then the types FLOAT8, INTEGER and VARCHAR will be used instead.
The default is “YES”.</p></li>
<li><p><strong>DIM={2,3,XYM,XYZM}</strong>: Control the dimension of the layer. Important
to set to 2 for 2D layers with PostGIS 1.0+ as it has constraints on
the geometry dimension during loading.</p></li>
<li><p><strong>GEOMETRY_NAME</strong>: Set name of geometry column in new table. If
omitted it defaults to <em>wkb_geometry</em> for GEOM_TYPE=geometry, or
<em>the_geog</em> for GEOM_TYPE=geography.</p></li>
<li><p><strong>SCHEMA</strong>: Set name of schema for new table. Using the same layer
name in different schemas is supported, but not in the public schema
and others. Note that using the -overwrite option of ogr2ogr and -lco
SCHEMA= option at the same time will not work, as the ogr2ogr utility
will not understand that the existing layer must be destroyed in the
specified schema. Use the -nln option of ogr2ogr instead, or better
the active_schema connection string. See below example.</p></li>
<li><p><strong>SPATIAL_INDEX</strong>=NONE/GIST/SPGIST/BRIN (starting with GDAL 2.4) or
YES/NO for earlier versions and backward compatibility: Set to GIST
(GDAL &gt;=2.4, or YES for earlier versions) by default. Creates a
spatial index (GiST) on the geometry column to speed up queries (Has
effect only when PostGIS is available). Set to NONE (GDAL &gt;= 2.4, or
FALSE for earlier versions) to disable. BRIN is only available with
PostgreSQL &gt;= 9.4 and PostGIS &gt;= 2.3. SPGIST is only available with
PostgreSQL &gt;= 11 and PostGIS &gt;= 2.5</p></li>
<li><p><strong>TEMPORARY</strong>: (From GDAL 1.8.0) Set to OFF by default. Creates a
temporary table instead of a permanent one.</p></li>
<li><p><strong>UNLOGGED</strong>: (From GDAL 2.0) Set to OFF by default. Whether to
create the table as a unlogged one. Unlogged tables are only
supported since PostgreSQL 9.1, and GiST indexes used for spatial
indexing since PostgreSQL 9.3.</p></li>
<li><p><strong>NONE_AS_UNKNOWN</strong>: (From GDAL 1.8.1) Can bet set to TRUE to force
non-spatial layers (wkbNone) to be created as spatial tables of type
GEOMETRY (wkbUnknown), which was the behavior prior to GDAL 1.8.0.
Defaults to NO, in which case a regular table is created and not
recorded in the PostGIS geometry_columns table.</p></li>
<li><p><strong>FID</strong>: (From GDAL 1.9.0) Name of the FID column to create. Defaults
to ‘ogc_fid’.</p></li>
<li><p><strong>FID64</strong>: (From GDAL 2.0) This may be “TRUE” to create a FID column
that can support 64 bit identifiers. The default value is “FALSE”.</p></li>
<li><p><strong>EXTRACT_SCHEMA_FROM_LAYER_NAME</strong>: (From GDAL 1.9.0) Can be set to
NO to avoid considering the dot character as the separator between
the schema and the table name. Defaults to YES.</p></li>
<li><p><strong>COLUMN_TYPES</strong>: (From GDAL 1.10) A list of strings of format
field_name=pg_field_type (separated by comma) that should be use when
CreateField() is invoked on them. This will override the default
choice that OGR would have made. This can for example be used to
create a column of type
<a class="reference external" href="http://www.postgresql.org/docs/9.0/static/hstore.html">HSTORE</a>.</p></li>
<li><p><strong>DESCRIPTION</strong> (From GDAL 2.1) Description string to put in the
pg_description system table. On reading, if such a description is
found, it is exposed in the DESCRIPTION metadata item. The
description can also be written with SetMetadataItem(“DESCRIPTION”,
description_string). Descriptions are preserved by default by
ogr2ogr, unless the -nomd option is used.</p></li>
</ul>
</div>
<div class="section" id="configuration-options">
<h3>Configuration Options<a class="headerlink" href="#configuration-options" title="Permalink to this headline">¶</a></h3>
<p>There are a variety of <a class="reference external" href="http://trac.osgeo.org/gdal/wiki/ConfigOptions">Configuration
Options</a> which help
control the behavior of this driver.</p>
<ul class="simple">
<li><p><strong>PG_USE_COPY</strong>: This may be “YES” for using COPY for inserting data
to Postgresql. COPY is significantly faster than INSERT. Starting
with GDAL 2.0, COPY is used by default when inserting from a table
that has just been created.</p></li>
<li><p><strong>PGSQL_OGR_FID</strong>: Set name of primary key instead of ‘ogc_fid’. Only
used when opening a layer whose primary key cannot be autodetected.
Ignored by CreateLayer() that uses the FID creation option.</p></li>
<li><p><strong>PG_USE_BASE64</strong>: (GDAL &gt;= 1.8.0) If set to “YES”, geometries will
be fetched as BASE64 encoded EWKB instead of canonical HEX encoded
EWKB. This reduces the amount of data to be transferred from 2 N to
1.333 N, where N is the size of EWKB data. However, it might be a bit
slower than fetching in canonical form when the client and the server
are on the same machine, so the default is NO.</p></li>
<li><p><strong>OGR_TRUNCATE</strong>: (GDAL &gt;= 1.11) If set to “YES”, the content of the
table will be first erased with the SQL TRUNCATE command before
inserting the first feature. This is an alternative to using the
-overwrite flag of ogr2ogr, that avoids views based on the table to
be destroyed. Typical use case: “ogr2ogr -append PG:dbname=foo
abc.shp –config OGR_TRUNCATE YES”.</p></li>
</ul>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Simple translation of a shapefile into PostgreSQL. The table ‘abc’
will be created with the features from abc.shp and attributes from
abc.dbf. The database instance (warmerda) must already exist, and the
table abc must not already exist.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">ogr2ogr</span> <span class="o">-</span><span class="n">f</span> <span class="n">PostgreSQL</span> <span class="n">PG</span><span class="p">:</span><span class="n">dbname</span><span class="o">=</span><span class="n">warmerda</span> <span class="n">abc</span><span class="o">.</span><span class="n">shp</span>
</pre></div>
</div>
</li>
<li><p>This second example loads a political boundaries layer from VPF (via
the <a class="reference internal" href="ogdi.html#vector-ogdi"><span class="std std-ref">OGDI driver</span></a>), and renames the layer from the
cryptic OGDI layer name to something more sensible. If an existing
table of the desired name exists it is overwritten.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">ogr2ogr</span> <span class="o">-</span><span class="n">f</span> <span class="n">PostgreSQL</span> <span class="n">PG</span><span class="p">:</span><span class="n">dbname</span><span class="o">=</span><span class="n">warmerda</span> \
        <span class="n">gltp</span><span class="p">:</span><span class="o">/</span><span class="n">vrf</span><span class="o">/</span><span class="n">usr4</span><span class="o">/</span><span class="n">mpp1</span><span class="o">/</span><span class="n">v0eur</span><span class="o">/</span><span class="n">vmaplv0</span><span class="o">/</span><span class="n">eurnasia</span> \
        <span class="o">-</span><span class="n">lco</span> <span class="n">OVERWRITE</span><span class="o">=</span><span class="n">yes</span> <span class="o">-</span><span class="n">nln</span> <span class="n">polbndl_bnd</span> <span class="s1">&#39;polbndl@bnd(*)_line&#39;</span>
</pre></div>
</div>
</li>
<li><p>Export a single Postgres table to GeoPackage:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogr2ogr</span> \
  <span class="o">-</span><span class="n">f</span> <span class="n">GPKG</span> <span class="n">output</span><span class="o">.</span><span class="n">gpkg</span> \
  <span class="n">PG</span><span class="p">:</span><span class="n">dbname</span><span class="o">=</span><span class="s2">&quot;my_database&quot;</span> <span class="s2">&quot;my_table&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Export many Postgres tables to GeoPackage:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogr2ogr</span> \
  <span class="o">-</span><span class="n">f</span> <span class="n">GPKG</span> <span class="n">output</span><span class="o">.</span><span class="n">gpkg</span> \
  <span class="n">PG</span><span class="p">:</span><span class="s1">&#39;dbname=my_database tables=table_1,table_3&#39;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Export a whole Postgres database to GeoPackage:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogr2ogr</span> \
  <span class="o">-</span><span class="n">f</span> <span class="n">GPKG</span> <span class="n">output</span><span class="o">.</span><span class="n">gpkg</span> \
  <span class="n">PG</span><span class="p">:</span><span class="n">dbname</span><span class="o">=</span><span class="n">my_database</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Load a single layer GeoPackage into Postgres:</p>
<blockquote>
<div><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogr2ogr</span> \
  <span class="o">-</span><span class="n">f</span> <span class="s2">&quot;PostgreSQL&quot;</span> <span class="n">PG</span><span class="p">:</span><span class="n">dbname</span><span class="o">=</span><span class="s2">&quot;my_database&quot;</span> \
  <span class="nb">input</span><span class="o">.</span><span class="n">gpkg</span> \
  <span class="o">-</span><span class="n">nln</span> <span class="s2">&quot;name_of_new_table&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>In this example we merge tiger line data from two different
directories of tiger files into one table. Note that the second
invocation uses -append and no OVERWRITE=yes.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span> <span class="n">ogr2ogr</span> <span class="o">-</span><span class="n">f</span> <span class="n">PostgreSQL</span> <span class="n">PG</span><span class="p">:</span><span class="n">dbname</span><span class="o">=</span><span class="n">warmerda</span> <span class="n">tiger_michigan</span> \
     <span class="o">-</span><span class="n">lco</span> <span class="n">OVERWRITE</span><span class="o">=</span><span class="n">yes</span> <span class="n">CompleteChain</span>
<span class="o">%</span> <span class="n">ogr2ogr</span> <span class="o">-</span><span class="n">update</span> <span class="o">-</span><span class="n">append</span> <span class="o">-</span><span class="n">f</span> <span class="n">PostgreSQL</span> <span class="n">PG</span><span class="p">:</span><span class="n">dbname</span><span class="o">=</span><span class="n">warmerda</span> <span class="n">tiger_ohio</span> \
     <span class="n">CompleteChain</span>
</pre></div>
</div>
</li>
<li><p>This example shows using ogrinfo to evaluate an SQL query statement
within PostgreSQL. More sophisticated PostGIS specific queries may
also be used via the -sql commandline switch to ogrinfo.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="o">-</span><span class="n">ro</span> <span class="n">PG</span><span class="p">:</span><span class="n">dbname</span><span class="o">=</span><span class="n">warmerda</span> <span class="o">-</span><span class="n">sql</span> <span class="s2">&quot;SELECT pop_1994 from canada where province_name = &#39;Alberta&#39;&quot;</span>
</pre></div>
</div>
</li>
<li><p>This example shows using ogrinfo to list PostgreSQL/PostGIS layers on
a different host.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="o">-</span><span class="n">ro</span> <span class="n">PG</span><span class="p">:</span><span class="s1">&#39;host=myserver.velocet.ca user=postgres dbname=warmerda&#39;</span>
</pre></div>
</div>
</li>
<li><p>This example shows use of PRELUDE_STATEMENTS and CLOSING_STATEMENTS
as destination open options of ogr2ogr.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="s2">&quot;pg:dbname=mydb&quot;</span> <span class="n">poly</span><span class="o">.</span><span class="n">shp</span> <span class="o">-</span><span class="n">doo</span> <span class="s2">&quot;PRELUDE_STATEMENTS=BEGIN; SET LOCAL statement_timeout TO &#39;1h&#39;;&quot;</span> <span class="o">-</span><span class="n">doo</span> <span class="n">CLOSING_STATEMENTS</span><span class="o">=</span><span class="n">COMMIT</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="faqs">
<h2>FAQs<a class="headerlink" href="#faqs" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>Why can’t I see my tables? PostGIS is installed and I have data</strong>
You must have permissions on all tables you want to read <em>and</em>
geometry_columns and spatial_ref_sys.
Misleading behavior may follow without an error message if you do not
have permissions to these tables. Permission issues on
geometry_columns and/or spatial_ref_sys tables can be generally
confirmed if you can see the tables by setting the configuration
option PG_LIST_ALL_TABLES to YES. (e.g. ogrinfo –config
PG_LIST_ALL_TABLES YES PG:xxxxx)</p></li>
</ul>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="pg_advanced.html#vector-pg-advanced"><span class="std std-ref">Advanced OGR PostgreSQL driver Information</span></a></p></li>
<li><p><a class="reference internal" href="pgdump.html#vector-pgdump"><span class="std std-ref">OGR PostgreSQL SQL Dump driver Page</span></a></p></li>
<li><p><a class="reference external" href="http://www.postgresql.org/">PostgreSQL Home Page</a></p></li>
<li><p><a class="reference external" href="http://postgis.net/">PostGIS</a></p></li>
<li><p><a class="reference external" href="http://trac.osgeo.org/postgis/wiki/UsersWikiOGR">PostGIS / OGR Wiki Examples
Page</a></p></li>
</ul>
<div class="toctree-wrapper compound">
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pg_advanced.html" class="btn btn-neutral float-right" title="PostgreSQL / PostGIS - Advanced Driver Information" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="pgeo.html" class="btn btn-neutral float-left" title="ESRI Personal GeoDatabase" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2020 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>