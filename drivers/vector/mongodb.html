

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MongoDB &mdash; GDAL  documentation</title>
  

  
  
  
  
    <link rel="canonical" href="https://gdal.orgdrivers/vector/mongodb.html"/>
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/gdal.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="author" title="About these documents" href="../../about.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MongoDBv3" href="mongodbv3.html" />
    <link rel="prev" title="MapInfo TAB and MIF/MID" href="mitab.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: white" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/gdalicon.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../download.html">Download</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../programs/index.html">Programs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../raster/index.html">Raster drivers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Vector drivers</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="aeronavfaa.html">Aeronav FAA</a></li>
<li class="toctree-l2"><a class="reference internal" href="amigocloud.html">AmigoCloud</a></li>
<li class="toctree-l2"><a class="reference internal" href="ao.html">ESRI ArcObjects</a></li>
<li class="toctree-l2"><a class="reference internal" href="arcgen.html">ARCGEN - Arc/Info Generate</a></li>
<li class="toctree-l2"><a class="reference internal" href="avcbin.html">Arc/Info Binary Coverage</a></li>
<li class="toctree-l2"><a class="reference internal" href="avce00.html">Arc/Info E00 (ASCII) Coverage</a></li>
<li class="toctree-l2"><a class="reference internal" href="bna.html">BNA - Atlas BNA</a></li>
<li class="toctree-l2"><a class="reference internal" href="cad.html">CAD – AutoCAD DWG</a></li>
<li class="toctree-l2"><a class="reference internal" href="carto.html">Carto</a></li>
<li class="toctree-l2"><a class="reference internal" href="cloudant.html">Cloudant – Cloudant</a></li>
<li class="toctree-l2"><a class="reference internal" href="couchdb.html">CouchDB - CouchDB/GeoCouch</a></li>
<li class="toctree-l2"><a class="reference internal" href="csv.html">Comma Separated Value (.csv)</a></li>
<li class="toctree-l2"><a class="reference internal" href="csw.html">CSW - OGC CSW (Catalog Service for the Web)</a></li>
<li class="toctree-l2"><a class="reference internal" href="db2.html">DB2 Spatial</a></li>
<li class="toctree-l2"><a class="reference internal" href="dgn.html">Microstation DGN</a></li>
<li class="toctree-l2"><a class="reference internal" href="dgnv8.html">Microstation DGN v8</a></li>
<li class="toctree-l2"><a class="reference internal" href="dods.html">DODS/OPeNDAP</a></li>
<li class="toctree-l2"><a class="reference internal" href="dwg.html">AutoCAD DWG</a></li>
<li class="toctree-l2"><a class="reference internal" href="dxf.html">AutoCAD DXF</a></li>
<li class="toctree-l2"><a class="reference internal" href="eeda.html">Google Earth Engine Data API</a></li>
<li class="toctree-l2"><a class="reference internal" href="edigeo.html">EDIGEO</a></li>
<li class="toctree-l2"><a class="reference internal" href="elasticsearch.html">Elasticsearch: Geographically Encoded Objects for Elasticsearch</a></li>
<li class="toctree-l2"><a class="reference internal" href="esrijson.html">ESRIJSON / FeatureService driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="filegdb.html">ESRI File Geodatabase (FileGDB)</a></li>
<li class="toctree-l2"><a class="reference internal" href="flatgeobuf.html">FlatGeobuf</a></li>
<li class="toctree-l2"><a class="reference internal" href="fme.html">FMEObjects Gateway</a></li>
<li class="toctree-l2"><a class="reference internal" href="geoconcept.html">GeoConcept text export</a></li>
<li class="toctree-l2"><a class="reference internal" href="geojson.html">GeoJSON</a></li>
<li class="toctree-l2"><a class="reference internal" href="geojsonseq.html">GeoJSONSeq: sequence of GeoJSON features</a></li>
<li class="toctree-l2"><a class="reference internal" href="geomedia.html">Geomedia MDB database</a></li>
<li class="toctree-l2"><a class="reference internal" href="georss.html">GeoRSS : Geographically Encoded Objects for RSS feeds</a></li>
<li class="toctree-l2"><a class="reference internal" href="gmlas.html">GMLAS - Geography Markup Language (GML) driven by application schemas</a></li>
<li class="toctree-l2"><a class="reference internal" href="gml.html">GML - Geography Markup Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="gmt.html">GMT ASCII Vectors (.gmt)</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpkg.html">GPKG – GeoPackage vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpsbabel.html">GPSBabel</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpx.html">GPX - GPS Exchange Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="grass.html">GRASS Vector Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="gtm.html">GTM - GPS TrackMaker</a></li>
<li class="toctree-l2"><a class="reference internal" href="htf.html">HTF - Hydrographic Transfer Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="idb.html">IDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="idrisi.html">Idrisi Vector (.VCT)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ili.html">“INTERLIS 1” and “INTERLIS 2” drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="ingres.html">INGRES</a></li>
<li class="toctree-l2"><a class="reference internal" href="jml.html">JML: OpenJUMP JML format</a></li>
<li class="toctree-l2"><a class="reference internal" href="kml.html">KML - Keyhole Markup Language</a></li>
<li class="toctree-l2"><a class="reference internal" href="libkml.html">LIBKML Driver (.kml .kmz)</a></li>
<li class="toctree-l2"><a class="reference internal" href="mapml.html">MapML</a></li>
<li class="toctree-l2"><a class="reference internal" href="mdb.html">Access MDB databases</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory.html">Memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="mitab.html">MapInfo TAB and MIF/MID</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">MongoDB</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#driver-capabilities">Driver capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mongodb-vs-ogr-concepts">MongoDB vs OGR concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dataset-name-syntax">Dataset name syntax</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filtering">Filtering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#paging">Paging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#schema">Schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="#feature-id">Feature ID</a></li>
<li class="toctree-l3"><a class="reference internal" href="#executesql-interface">ExecuteSQL() interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#write-support">Write support</a></li>
<li class="toctree-l3"><a class="reference internal" href="#layer-creation-options">Layer creation options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#examples">Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-instructions">Build instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="mongodbv3.html">MongoDBv3</a></li>
<li class="toctree-l2"><a class="reference internal" href="mssqlspatial.html">MSSQLSpatial - Microsoft SQL Server Spatial Database</a></li>
<li class="toctree-l2"><a class="reference internal" href="mvt.html">MVT: Mapbox Vector Tiles</a></li>
<li class="toctree-l2"><a class="reference internal" href="mysql.html">MySQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="nas.html">NAS - ALKIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="netcdf.html">NetCDF: Network Common Data Form - Vector</a></li>
<li class="toctree-l2"><a class="reference internal" href="ngw.html">NGW – NextGIS Web</a></li>
<li class="toctree-l2"><a class="reference internal" href="ntf.html">UK .NTF</a></li>
<li class="toctree-l2"><a class="reference internal" href="oapif.html">OGC API - Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="oci.html">Oracle Spatial</a></li>
<li class="toctree-l2"><a class="reference internal" href="odbc.html">ODBC RDBMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="ods.html">ODS - Open Document Spreadsheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="ogdi.html">OGDI Vectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="openair.html">OpenAir - OpenAir Special Use Airspace Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="openfilegdb.html">ESRI File Geodatabase (OpenFileGDB)</a></li>
<li class="toctree-l2"><a class="reference internal" href="osm.html">OSM - OpenStreetMap XML and PBF</a></li>
<li class="toctree-l2"><a class="reference internal" href="pdf.html">PDF – Geospatial PDF</a></li>
<li class="toctree-l2"><a class="reference internal" href="pds.html">PDS - Planetary Data Systems TABLE</a></li>
<li class="toctree-l2"><a class="reference internal" href="pgdump.html">PostgreSQL SQL Dump</a></li>
<li class="toctree-l2"><a class="reference internal" href="pgeo.html">ESRI Personal GeoDatabase</a></li>
<li class="toctree-l2"><a class="reference internal" href="pg.html">PostgreSQL / PostGIS</a></li>
<li class="toctree-l2"><a class="reference internal" href="plscenes.html">PLScenes (Planet Labs Scenes/Catalog API)</a></li>
<li class="toctree-l2"><a class="reference internal" href="s57.html">IHO S-57 (ENC)</a></li>
<li class="toctree-l2"><a class="reference internal" href="sde.html">ESRI ArcSDE</a></li>
<li class="toctree-l2"><a class="reference internal" href="sdts.html">SDTS</a></li>
<li class="toctree-l2"><a class="reference internal" href="segukooa.html">SEG-P1 / UKOOA P1/90</a></li>
<li class="toctree-l2"><a class="reference internal" href="segy.html">SEG-Y / SEGY</a></li>
<li class="toctree-l2"><a class="reference internal" href="selafin.html">Selafin files</a></li>
<li class="toctree-l2"><a class="reference internal" href="shapefile.html">ESRI Shapefile / DBF</a></li>
<li class="toctree-l2"><a class="reference internal" href="sosi.html">Norwegian SOSI Standard</a></li>
<li class="toctree-l2"><a class="reference internal" href="sqlite.html">SQLite / Spatialite RDBMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="sua.html">SUA - Tim Newport-Peace’s Special Use Airspace Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="svg.html">SVG - Scalable Vector Graphics</a></li>
<li class="toctree-l2"><a class="reference internal" href="sxf.html">Storage and eXchange Format - SXF</a></li>
<li class="toctree-l2"><a class="reference internal" href="tiger.html">U.S. Census TIGER/Line</a></li>
<li class="toctree-l2"><a class="reference internal" href="topojson.html">TopoJSON driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="vdv.html">VDV - VDV-451/VDV-452/INTREST Data Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="vfk.html">VFK - Czech Cadastral Exchange Data Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="vrt.html">VRT – Virtual Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="walk.html">Walk - Walk Spatial Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="wasp.html">WAsP - WAsP .map format</a></li>
<li class="toctree-l2"><a class="reference internal" href="wfs.html">WFS - OGC WFS service</a></li>
<li class="toctree-l2"><a class="reference internal" href="xls.html">XLS - MS Excel format</a></li>
<li class="toctree-l2"><a class="reference internal" href="xlsx.html">XLSX - MS Office Open XML spreadsheet</a></li>
<li class="toctree-l2"><a class="reference internal" href="xplane.html">X-Plane/Flightgear aeronautical data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../user/index.html">User</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/index.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/index.html">Development</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community.html">Community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing/index.html">How to contribute?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../license.html">License</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">GDAL</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html"> GDAL  documentation </a> &raquo;</li>
      
          <li><a href="index.html">Vector drivers</a> &raquo;</li>
      
      <li>MongoDB</li>
    

    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/OSGeo/gdal/edit//master/gdal/doc/source/drivers/vector/mongodb.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <div class="rst-breadcrumbs-buttons" role="navigation" aria-label="breadcrumb navigation">
      
        <a href="mongodbv3.html" class="btn btn-neutral float-right" title="MongoDBv3" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mitab.html" class="btn btn-neutral float-left" title="MapInfo TAB and MIF/MID" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
  </div>
  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="mongodb">
<span id="vector-mongodb"></span><h1>MongoDB<a class="headerlink" href="#mongodb" title="Permalink to this headline">¶</a></h1>
<div class="versionadded">
<p><span class="versionmodified added">New in version 2.1.</span></p>
</div>
<div class="admonition shortname" id="shortname-0">
<p class="admonition-title">Driver short name</p>
<p>MongoDB</p>
</div>
<div class="admonition build_dependencies" id="build_dependencies-0">
<p class="admonition-title">Build dependencies</p>
<p>Mongo C++ client legacy library</p>
</div>
<p>This driver can connect to the a MongoDB service.</p>
<p>The driver supports read, creation, update and delete operations of
documents/features and collections/layers. The MongoDB database must
exist before operating on it with OGR.</p>
<p>This driver uses the legacy MongoDB C++ driver client library. To
connect to MongoDB 3.0 or later servers, starting with GDAL 3.0, use the
new <a class="reference internal" href="mongodbv3.html#vector-mongodbv3"><span class="std std-ref">MongoDBv3</span></a> driver which uses the MongoDB C++
v3.4.0 client library. This driver will be eventually in favor of
MongoDBv3</p>
<div class="section" id="driver-capabilities">
<h2>Driver capabilities<a class="headerlink" href="#driver-capabilities" title="Permalink to this headline">¶</a></h2>
<div class="admonition supports_create" id="supports_create-0">
<p class="admonition-title">Supports Create()</p>
<p>This driver supports the <a class="reference internal" href="../../api/gdaldriver_cpp.html#_CPPv4N10GDALDriver6CreateEPKciii12GDALDataTypePPc" title="GDALDriver::Create"><code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">GDALDriver::Create()</span></code></a> operation</p>
</div>
<div class="admonition supports_georeferencing" id="supports_georeferencing-0">
<p class="admonition-title">Supports Georeferencing</p>
<p>This driver supports georeferencing</p>
</div>
<div class="admonition supports_virtualio" id="supports_virtualio-0">
<p class="admonition-title">Supports VirtualIO</p>
<p>This driver supports <a class="reference internal" href="../../user/virtual_file_systems.html#virtual-file-systems"><span class="std std-ref">virtual I/O operations (/vsimem/, etc.)</span></a></p>
</div>
</div>
<div class="section" id="mongodb-vs-ogr-concepts">
<h2>MongoDB vs OGR concepts<a class="headerlink" href="#mongodb-vs-ogr-concepts" title="Permalink to this headline">¶</a></h2>
<p>A MongoDB collection within a database is considered as a OGR layer. A
MongoDB document is considered as a OGR feature.</p>
</div>
<div class="section" id="dataset-name-syntax">
<h2>Dataset name syntax<a class="headerlink" href="#dataset-name-syntax" title="Permalink to this headline">¶</a></h2>
<p>There are two main possible syntaxes:</p>
<ul class="simple">
<li><p>One using <a class="reference external" href="http://docs.mongodb.org/v2.6/reference/connection-string/">MongoDB
URI</a>,
such as
mongodb://[usr:pwd&#64;]host1[:port1]…[,hostN[:portN]]][/[db][?options]]</p></li>
<li><p>One using just MongoDB: as the name and open options to specify host,
port, user, password, database, etc…</p></li>
</ul>
<p>The open options available are :</p>
<ul class="simple">
<li><p><strong>URI</strong>=uri: <a class="reference external" href="http://docs.mongodb.org/v2.6/reference/connection-string/">Connection
URI</a></p></li>
<li><p><strong>HOST</strong>=hostname: Server hostname. Default to localhost.</p></li>
<li><p><strong>PORT</strong>=port. Server port. Default to 27017.</p></li>
<li><p><strong>DBNAME</strong>=dbname. Database name. Should be specified when
connecting to hosts with user authentication enabled.</p></li>
<li><p><strong>AUTH_DBNAME</strong>=dbname. Authentication database name, in case it is
different from the database to work onto.</p></li>
<li><p><strong>USER</strong>=name. User name.</p></li>
<li><p><strong>PASSWORD</strong>=password. User password.</p></li>
<li><p><strong>AUTH_JSON</strong>=json_string. Authentication elements as JSon object.
This is for advanced authentication. The JSon fields to put in the
dictionary are :</p>
<ul>
<li><p>“mechanism”: The string name of the sasl mechanism to use
(MONGODB-CR, SCRAM-SHA-1 or DEFAULT). Mandatory.</p></li>
<li><p>“user”: The string name of the user to authenticate. Mandatory.</p></li>
<li><p>“db”: The database target of the auth command, which identifies
the location of the credential information for the user. May be
“$external” if credential information is stored outside of the
mongo cluster. Mandatory.</p></li>
<li><p>“pwd”: The password data.</p></li>
<li><p>“digestPassword”: Boolean, set to true if the “pwd” is undigested
(default)</p></li>
<li><p>“pwd”: The password data.</p></li>
<li><p>“serviceHostname”: The GSSAPI hostname to use. Defaults to the
name of the remote host.</p></li>
</ul>
</li>
<li><p><strong>SSL_PEM_KEY_FILE</strong>=filename. SSL PEM certificate/key filename.</p></li>
<li><p><strong>SSL_PEM_KEY_PASSWORD</strong>=password. SSL PEM key password.</p></li>
<li><p><strong>SSL_CA_FILE</strong>=filename. SSL Certification Authority filename.</p></li>
<li><p><strong>SSL_CRL_FILE</strong>=filename. SSL Certification Revocation List
filename.</p></li>
<li><p><strong>SSL_ALLOW_INVALID_CERTIFICATES</strong>=YES/NO. Whether to allow
connections to servers with invalid certificates. Defaults to NO.</p></li>
<li><p><strong>SSL_ALLOW_INVALID_HOSTNAMES</strong>=YES/NO. Whether to allow
connections to servers with non-matching hostnames. Defaults to NO.</p></li>
<li><p><strong>FIPS_MODE</strong>=YES/NO. Whether to activate FIPS 140-2 mode at
startup. Defaults to NO.</p></li>
<li><p><strong>BATCH_SIZE</strong>=number. Number of features to retrieve per batch.
For most queries, the first batch returns 101 documents or just
enough documents to exceed 1 megabyte. Subsequent batch size is 4
megabytes.</p></li>
<li><p><strong>FEATURE_COUNT_TO_ESTABLISH_FEATURE_DEFN</strong>=number. Number of
features to retrieve to establish feature definition. -1 = unlimited.
Defaults to 100.</p></li>
<li><p><strong>JSON_FIELD</strong>=YES/NO. Whether to include a field called “_json”
with the full document as JSON. Defaults to NO.</p></li>
<li><p><strong>FLATTEN_NESTED_ATTRIBUTE</strong>=YES/NO. Whether to recursively explore
nested objects and produce flatten OGR attributes. Defaults to YES.</p></li>
<li><p><strong>FID</strong>=name. Field name, with integer values, to use as FID.
Defaults to ogc_fid.</p></li>
<li><p><strong>USE_OGR_METADATA</strong>=YES/NO. Whether to use the _ogr_metadata
collection to read layer metadata. Defaults to YES.</p></li>
<li><p><strong>BULK_INSERT</strong>=YES/NO. Whether to use bulk insert for feature
creation. Defaults to YES.</p></li>
</ul>
<p>Note: the SSL_* and FIPS_MODE options must be set to the same values
when opening multiple types MongoDB databases. This is a limitation of
the Mongo C++ driver.</p>
</div>
<div class="section" id="filtering">
<h2>Filtering<a class="headerlink" href="#filtering" title="Permalink to this headline">¶</a></h2>
<p>The driver will forward any spatial filter set with SetSpatialFilter()
to the server when a “2d” or “2dsphere” spatial index is available on
the geometry field.</p>
<p>However, in the current state, SQL attribute filters set with
SetAttributeFilter() are evaluated only on client-side. To enable
server-side filtering, the string passed to SetAttributeFilter() must be
a JSon object in the <a class="reference external" href="http://docs.mongodb.org/v2.6/reference/method/db.collection.find/">MongoDB filter
syntax</a>.</p>
</div>
<div class="section" id="paging">
<h2>Paging<a class="headerlink" href="#paging" title="Permalink to this headline">¶</a></h2>
<p>Features are retrieved from the server by chunks of 101 documents or
just enough documents to exceed 1 megabyte. Subsequent batch size is 4
megabytes. This can be altered with the BATCH_SIZE open option.</p>
</div>
<div class="section" id="schema">
<h2>Schema<a class="headerlink" href="#schema" title="Permalink to this headline">¶</a></h2>
<p>When reading a MongoDB collection, OGR must establish the schema of
attribute and geometry fields, since, contrary to MongoDB collections
which are schema-less, OGR has a fixed schema concept.</p>
<p>In the general case, OGR will read the first 100 documents (can be
altered with the FEATURE_COUNT_TO_ESTABLISH_FEATURE_DEFN open option) of
the collection and build the schema that best fit to the found fields
and values.</p>
<p>If the collection/layer has been previously created with OGR, a
_ogr_metadata special collection contains the OGR schema, in which case
it will be directly used. It might be possible to ignore the schema
written in _ogr_metadata by setting the USE_OGR_METADATA=NO open
option.</p>
<p>It is also possible to set the JSON_FIELD=YES open option so that a
_json special field is added to the OGR schema. When reading MongoDB
documents as OGR features, the full JSon version of the document will be
stored in the _json field. This might be useful in case of complex
documents or with data types that do not translate well in OGR data
types. On creation/update of documents, if the _json field is present
and set, its content will be used directly (other fields will be
ignored).</p>
</div>
<div class="section" id="feature-id">
<h2>Feature ID<a class="headerlink" href="#feature-id" title="Permalink to this headline">¶</a></h2>
<p>MongoDB have a special _id field that contains the unique ID of the
document. This field is returned as an OGR field, but cannot be used as
the OGR special FeatureID field, which must be of integer type. By
default, OGR will try to read a potential ‘ogc_fid’ field to set the OGR
FeatureID. The name of this field to look up can be set with the FID
open option. If the field is not found, the FID returned by OGR will be
a sequential number starting at 1, but it is not guaranteed to be stable
at all.</p>
</div>
<div class="section" id="executesql-interface">
<h2>ExecuteSQL() interface<a class="headerlink" href="#executesql-interface" title="Permalink to this headline">¶</a></h2>
<p>If specifying “MongoDB” as the dialect of ExecuteSQL(), a JSon string
with a serialized <a class="reference external" href="http://docs.mongodb.org/v2.6/reference/command/">MongoDB
command</a> can be
passed. The result will be returned as a JSon string in a single OGR
feature.</p>
<p>Standard SQL requests will be executed on client-side.</p>
</div>
<div class="section" id="write-support">
<h2>Write support<a class="headerlink" href="#write-support" title="Permalink to this headline">¶</a></h2>
<p>Layer/collection creation and deletion is possible.</p>
<p>Write support is only enabled when the datasource is opened in update
mode.</p>
<p>When inserting a new feature with CreateFeature(), and if the command is
successful, OGR will fetch the returned _id and use it for the
SetFeature() operation.</p>
</div>
<div class="section" id="layer-creation-options">
<h2>Layer creation options<a class="headerlink" href="#layer-creation-options" title="Permalink to this headline">¶</a></h2>
<p>The following layer creation options are supported:</p>
<ul class="simple">
<li><p><strong>OVERWRITE</strong>=YES/NO. Whether to overwrite an existing collection
with the layer name to be created. Defaults to NO.</p></li>
<li><p><strong>GEOMETRY_NAME</strong>=name. Name of geometry column. Defaults to
‘geometry’.</p></li>
<li><p><strong>SPATIAL_INDEX</strong>=YES/NO. Whether to create a spatial index
(2dsphere). Defaults to YES.</p></li>
<li><p><strong>FID</strong>=string. Field name, with integer values, to use as FID.
Defaults to ‘ogc_fid’</p></li>
<li><p><strong>WRITE_OGR_METADATA</strong>=YES/NO. Whether to create a description of
layer fields in the _ogr_metadata collection. Defaults to YES.</p></li>
<li><p><strong>DOT_AS_NESTED_FIELD</strong>=YES/NO. Whether to consider dot character
in field name as sub-document. Defaults to YES.</p></li>
<li><p><strong>IGNORE_SOURCE_ID</strong>=YES/NO. Whether to ignore _id field in
features passed to CreateFeature(). Defaults to NO.</p></li>
</ul>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Listing the tables of a MongoDB database:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="o">-</span><span class="n">ro</span> <span class="n">mongodb</span><span class="p">:</span><span class="o">//</span><span class="n">user</span><span class="p">:</span><span class="n">password</span><span class="nd">@ds047612</span><span class="o">.</span><span class="n">mongolab</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">47612</span><span class="o">/</span><span class="n">gdalautotest</span>
</pre></div>
</div>
<p>Filtering on a MongoDB field:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogrinfo</span> <span class="o">-</span><span class="n">ro</span> <span class="n">mongodb</span><span class="p">:</span><span class="o">//</span><span class="n">user</span><span class="p">:</span><span class="n">password</span><span class="nd">@ds047612</span><span class="o">.</span><span class="n">mongolab</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">47612</span><span class="o">/</span><span class="n">gdalautotest</span> <span class="o">-</span><span class="n">where</span> <span class="s1">&#39;{ &quot;field&quot;: 5 }&#39;</span>
</pre></div>
</div>
<p>Creating and populating a collection from a shapefile:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ogr2ogr</span> <span class="o">-</span><span class="n">update</span> <span class="n">mongodb</span><span class="p">:</span><span class="o">//</span><span class="n">user</span><span class="p">:</span><span class="n">password</span><span class="nd">@ds047612</span><span class="o">.</span><span class="n">mongolab</span><span class="o">.</span><span class="n">com</span><span class="p">:</span><span class="mi">47612</span><span class="o">/</span><span class="n">gdalautotest</span> <span class="n">shapefile</span><span class="o">.</span><span class="n">shp</span>
</pre></div>
</div>
</div>
<div class="section" id="build-instructions">
<h2>Build instructions<a class="headerlink" href="#build-instructions" title="Permalink to this headline">¶</a></h2>
<p>GDAL/OGR must be built against the <a class="reference external" href="https://github.com/mongodb/mongo-cxx-driver">MongoDB C++ driver client
library</a>, in its
“legacy” version (tested with 1.0.2), in order to the MongoDB driver to
be compiled.</p>
<p>You must first follow <a class="reference external" href="https://github.com/mongodb/mongo-cxx-driver/wiki/Download-and-Compile-the-Legacy-Driver">MongoDB C++ driver client build
instructions</a>,
which require to have Boost libraries available.</p>
<p>Then:</p>
<ul>
<li><p>On Linux/Unix, run ./configure
–with-mongocxx=/path/to/installation/root (if the driver is already
installed in /usr, this is not needed). If the Boost libraries are
not found in the system paths, the path to the directory when the
libraries are found can be specified
–with-boost-lib-path=/path/to/boost/libs .</p></li>
<li><p>On Windows, uncomment and adapt the following in nmake.opt (or add in
nmake.local):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span># Uncomment for MongoDB support
# This configuration is valid for a libmongoclient built as a DLL with:
# scons.bat --32 --dynamic-windows --sharedclient --prefix=c:\users\even\dev\mongo-client-install
#           --cpppath=c:\users\even\dev\boost_1_55_0_32bit --libpath=c:\users\even\dev\boost_1_55_0_32bit\lib32-msvc-10.0 install

# Uncomment if plugin is preferred
#MONGODB_PLUGIN = YES

MONGODB_INC = c:/users/even/dev/mongo-client-install/include
# Boost library names must be edited to reflect the actual MSVC and Boost versions
BOOST_INC = c:/users/even/dev/boost_1_55_0_32bit
BOOST_LIB_PATH= c:\users\even\dev\boost_1_55_0_32bit\lib32-msvc-10.0
MONGODB_LIBS = c:/users/even/dev/mongo-client-install/lib/mongoclient.lib \
               $(BOOST_LIB_PATH)\libboost_thread-vc100-mt-1_55.lib \
               $(BOOST_LIB_PATH)\libboost_system-vc100-mt-1_55.lib \
               $(BOOST_LIB_PATH)\libboost_date_time-vc100-mt-1_55.lib \
               $(BOOST_LIB_PATH)\libboost_chrono-vc100-mt-1_55.lib
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/mongodb/mongo-cxx-driver">MongoDB C++ Driver</a></p></li>
<li><p><a class="reference external" href="http://docs.mongodb.org/v2.6/reference/">MongoDB 2.6 Manual</a></p></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="mongodbv3.html" class="btn btn-neutral float-right" title="MongoDBv3" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="mitab.html" class="btn btn-neutral float-left" title="MapInfo TAB and MIF/MID" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <div class="info">
      <a class="logo-link" href="https://osgeo.org">
        <div class="osgeo-logo"></div>
      </a>
      <div class="copyright">
      

      &copy; 1998-2020 <a href="https://github.com/warmerdam">Frank Warmerdam</a>,
      <a href="https://github.com/rouault">Even Rouault</a>, and
      <a href="https://github.com/OSGeo/gdal/graphs/contributors">others</a>


      
      </div>
    </div>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>